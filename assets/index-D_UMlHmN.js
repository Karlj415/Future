import{R as be,j as L,a as N,u as Ce,m as V,c as oe,d as te,e as ee,f as Ne,h as He,A as Me,i as xe,g as Oe}from"./vendor-DR10Ti8q.js";import{C as Fe,u as Pe,a as Ve,M as We,e as ze,c as je}from"./three-CamynJtP.js";(function(){const I=document.createElement("link").relList;if(I&&I.supports&&I.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))A(h);new MutationObserver(h=>{for(const e of h)if(e.type==="childList")for(const l of e.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&A(l)}).observe(document,{childList:!0,subtree:!0});function T(h){const e={};return h.integrity&&(e.integrity=h.integrity),h.referrerPolicy&&(e.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?e.credentials="include":h.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function A(h){if(h.ep)return;h.ep=!0;const e=T(h);fetch(h.href,e)}})();class Ue extends be.Component{constructor(I){super(I),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(I,T){this.setState({error:I,errorInfo:T}),console.error("Uncaught error:",I,T)}render(){return this.state.hasError?L.jsxs("div",{className:"fixed inset-0 z-[9999] flex flex-col items-center justify-center bg-red-900 text-white p-8",children:[L.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Something went wrong."}),L.jsx("pre",{className:"bg-black/50 p-4 rounded max-w-full overflow-auto text-sm",children:this.state.error?.toString()}),L.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-6 py-3 bg-white text-red-900 font-bold rounded",children:"Reload Page"})]}):this.props.children}}const $e=()=>{const C=N.useRef(),I=N.useMemo(()=>({uTime:{value:0},uColor:{value:new Fe("#050505")}}),[]);return Pe(h=>{const{clock:e}=h;C.current&&(C.current.material.uniforms.uTime.value=e.getElapsedTime())}),L.jsxs("mesh",{ref:C,scale:[100,100,1],children:[L.jsx("planeGeometry",{args:[1,1]}),L.jsx("shaderMaterial",{vertexShader:`
    varying vec2 vUv;
    void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
  `,fragmentShader:`
    uniform float uTime;
    uniform vec3 uColor;
    varying vec2 vUv;

    // Simplex 2D noise
    vec3 permute(vec3 x) { return mod(((x*34.0)+1.0)*x, 289.0); }

    float snoise(vec2 v){
      const vec4 C = vec4(0.211324865405187, 0.366025403784439,
               -0.577350269189626, 0.024390243902439);
      vec2 i  = floor(v + dot(v, C.yy) );
      vec2 x0 = v -   i + dot(i, C.xx);
      vec2 i1;
      i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
      vec4 x12 = x0.xyxy + C.xxzz;
      x12.xy -= i1;
      i = mod(i, 289.0);
      vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))
      + i.x + vec3(0.0, i1.x, 1.0 ));
      vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);
      m = m*m ;
      m = m*m ;
      vec3 x = 2.0 * fract(p * C.www) - 1.0;
      vec3 h = abs(x) - 0.5;
      vec3 ox = floor(x + 0.5);
      vec3 a0 = x - ox;
      m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );
      vec3 g;
      g.x  = a0.x  * x0.x  + h.x  * x0.y;
      g.yz = a0.yz * x12.xz + h.yz * x12.yw;
      return 130.0 * dot(m, g);
    }

    void main() {
      float noise = snoise(vUv * 3.0 + uTime * 0.1);
      
      // Create a subtle grain effect
      float grain = snoise(vUv * 500.0 + uTime * 5.0) * 0.05;
      
      // Mix base color with noise and grain
      vec3 color = uColor + vec3(noise * 0.02) + vec3(grain);
      
      gl_FragColor = vec4(color, 1.0);
    }
  `,uniforms:I})]})},Ge=()=>{const C=N.useRef();Pe((T,A)=>{if(!C.current)return;C.current.rotation.x+=A*.15,C.current.rotation.y+=A*.15;const{x:h,y:e}=T.pointer;ze.damp3(C.current.position,[h*.3,e*.3,0],.25,A)});const I=N.useMemo(()=>({backside:!0,backsideThickness:.3,thickness:1.5,chromaticAberration:.3,anisotropy:.1,distortion:.3,distortionScale:.3,temporalDistortion:.1,iridescence:.3,iridescenceIOR:1,iridescenceThicknessRange:[0,1400],resolution:64,samples:1}),[]);return L.jsxs("mesh",{ref:C,children:[L.jsx("sphereGeometry",{args:[1.5,32,32]}),L.jsx(We,{...I})]})},Xe=()=>typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches,Ye=()=>{const C=N.useRef(null),[I,T]=N.useState(!0),[A,h]=N.useState(Xe);return N.useEffect(()=>{const e=window.matchMedia("(prefers-reduced-motion: reduce)"),l=a=>h(a.matches);return e.addEventListener("change",l),()=>e.removeEventListener("change",l)},[]),N.useEffect(()=>{if(!C.current)return;const e=new IntersectionObserver(([l])=>T(l.isIntersecting),{threshold:.1});return e.observe(C.current),()=>e.disconnect()},[]),L.jsxs("section",{ref:C,className:"relative w-full h-[100svh] min-h-[500px] bg-[#050505]",children:[!A&&L.jsxs(Ve,{frameloop:I?"always":"never",camera:{position:[0,0,5],fov:45},gl:{alpha:!1,antialias:!1,stencil:!1,depth:!0,powerPreference:"high-performance"},dpr:[1,1.5],children:[L.jsx("color",{attach:"background",args:["#050505"]}),L.jsx($e,{}),L.jsx("ambientLight",{intensity:.5}),L.jsx("directionalLight",{position:[5,5,5],intensity:1}),L.jsx(Ge,{})]}),A&&L.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900 to-black"}),L.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10 px-4",children:L.jsxs("h1",{className:"text-[clamp(2.5rem,12vw,16rem)] font-bold text-white mix-blend-difference leading-[0.9] tracking-tighter text-center",children:["HUMAN CODE /",L.jsx("br",{}),"NOT AI"]})})]})};var Qe="1.3.15";function Ee(C,I,T){return Math.max(C,Math.min(I,T))}function Ke(C,I,T){return(1-T)*C+T*I}function Ze(C,I,T,A){return Ke(C,I,1-Math.exp(-T*A))}function Je(C,I){return(C%I+I)%I}var qe=class{isRunning=!1;value=0;from=0;to=0;currentTime=0;lerp;duration;easing;onUpdate;advance(C){if(!this.isRunning)return;let I=!1;if(this.duration&&this.easing){this.currentTime+=C;const T=Ee(0,this.currentTime/this.duration,1);I=T>=1;const A=I?1:this.easing(T);this.value=this.from+(this.to-this.from)*A}else this.lerp?(this.value=Ze(this.value,this.to,this.lerp*60,C),Math.round(this.value)===this.to&&(this.value=this.to,I=!0)):(this.value=this.to,I=!0);I&&this.stop(),this.onUpdate?.(this.value,I)}stop(){this.isRunning=!1}fromTo(C,I,{lerp:T,duration:A,easing:h,onStart:e,onUpdate:l}){this.from=this.value=C,this.to=I,this.lerp=T,this.duration=A,this.easing=h,this.currentTime=0,this.isRunning=!0,e?.(),this.onUpdate=l}};function _e(C,I){let T;return function(...A){let h=this;clearTimeout(T),T=setTimeout(()=>{T=void 0,C.apply(h,A)},I)}}var et=class{constructor(C,I,{autoResize:T=!0,debounce:A=250}={}){this.wrapper=C,this.content=I,T&&(this.debouncedResize=_e(this.resize,A),this.wrapper instanceof Window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}width=0;height=0;scrollHeight=0;scrollWidth=0;debouncedResize;wrapperResizeObserver;contentResizeObserver;destroy(){this.wrapperResizeObserver?.disconnect(),this.contentResizeObserver?.disconnect(),this.wrapper===window&&this.debouncedResize&&window.removeEventListener("resize",this.debouncedResize,!1)}resize=()=>{this.onWrapperResize(),this.onContentResize()};onWrapperResize=()=>{this.wrapper instanceof Window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)};onContentResize=()=>{this.wrapper instanceof Window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)};get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}},Te=class{events={};emit(C,...I){let T=this.events[C]||[];for(let A=0,h=T.length;A<h;A++)T[A]?.(...I)}on(C,I){return this.events[C]?.push(I)||(this.events[C]=[I]),()=>{this.events[C]=this.events[C]?.filter(T=>I!==T)}}off(C,I){this.events[C]=this.events[C]?.filter(T=>I!==T)}destroy(){this.events={}}},ye=100/6,q={passive:!1},tt=class{constructor(C,I={wheelMultiplier:1,touchMultiplier:1}){this.element=C,this.options=I,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,q),this.element.addEventListener("touchstart",this.onTouchStart,q),this.element.addEventListener("touchmove",this.onTouchMove,q),this.element.addEventListener("touchend",this.onTouchEnd,q)}touchStart={x:0,y:0};lastDelta={x:0,y:0};window={width:0,height:0};emitter=new Te;on(C,I){return this.emitter.on(C,I)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,q),this.element.removeEventListener("touchstart",this.onTouchStart,q),this.element.removeEventListener("touchmove",this.onTouchMove,q),this.element.removeEventListener("touchend",this.onTouchEnd,q)}onTouchStart=C=>{const{clientX:I,clientY:T}=C.targetTouches?C.targetTouches[0]:C;this.touchStart.x=I,this.touchStart.y=T,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:C})};onTouchMove=C=>{const{clientX:I,clientY:T}=C.targetTouches?C.targetTouches[0]:C,A=-(I-this.touchStart.x)*this.options.touchMultiplier,h=-(T-this.touchStart.y)*this.options.touchMultiplier;this.touchStart.x=I,this.touchStart.y=T,this.lastDelta={x:A,y:h},this.emitter.emit("scroll",{deltaX:A,deltaY:h,event:C})};onTouchEnd=C=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:C})};onWheel=C=>{let{deltaX:I,deltaY:T,deltaMode:A}=C;const h=A===1?ye:A===2?this.window.width:1,e=A===1?ye:A===2?this.window.height:1;I*=h,T*=e,I*=this.options.wheelMultiplier,T*=this.options.wheelMultiplier,this.emitter.emit("scroll",{deltaX:I,deltaY:T,event:C})};onWindowResize=()=>{this.window={width:window.innerWidth,height:window.innerHeight}}},we=C=>Math.min(1,1.001-Math.pow(2,-10*C)),it=class{_isScrolling=!1;_isStopped=!1;_isLocked=!1;_preventNextNativeScrollEvent=!1;_resetVelocityTimeout=null;__rafID=null;isTouching;time=0;userData={};lastVelocity=0;velocity=0;direction=0;options;targetScroll;animatedScroll;animate=new qe;emitter=new Te;dimensions;virtualScroll;constructor({wrapper:C=window,content:I=document.documentElement,eventsTarget:T=C,smoothWheel:A=!0,syncTouch:h=!1,syncTouchLerp:e=.075,touchInertiaExponent:l=1.7,duration:a,easing:r,lerp:u=.1,infinite:i=!1,orientation:f="vertical",gestureOrientation:o=f==="horizontal"?"both":"vertical",touchMultiplier:t=1,wheelMultiplier:n=1,autoResize:s=!0,prevent:c,virtualScroll:m,overscroll:y=!0,autoRaf:S=!1,anchors:E=!1,autoToggle:d=!1,allowNestedScroll:p=!1,__experimental__naiveDimensions:g=!1}={}){window.lenisVersion=Qe,(!C||C===document.documentElement)&&(C=window),typeof a=="number"&&typeof r!="function"?r=we:typeof r=="function"&&typeof a!="number"&&(a=1),this.options={wrapper:C,content:I,eventsTarget:T,smoothWheel:A,syncTouch:h,syncTouchLerp:e,touchInertiaExponent:l,duration:a,easing:r,lerp:u,infinite:i,gestureOrientation:o,orientation:f,touchMultiplier:t,wheelMultiplier:n,autoResize:s,prevent:c,virtualScroll:m,overscroll:y,autoRaf:S,anchors:E,autoToggle:d,allowNestedScroll:p,__experimental__naiveDimensions:g},this.dimensions=new et(C,I,{autoResize:s}),this.updateClassName(),this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.addEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.anchors&&this.options.wrapper===window&&this.options.wrapper.addEventListener("click",this.onClick,!1),this.options.wrapper.addEventListener("pointerdown",this.onPointerDown,!1),this.virtualScroll=new tt(T,{touchMultiplier:t,wheelMultiplier:n}),this.virtualScroll.on("scroll",this.onVirtualScroll),this.options.autoToggle&&this.rootElement.addEventListener("transitionend",this.onTransitionEnd,{passive:!0}),this.options.autoRaf&&(this.__rafID=requestAnimationFrame(this.raf))}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.removeEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.wrapper.removeEventListener("pointerdown",this.onPointerDown,!1),this.options.anchors&&this.options.wrapper===window&&this.options.wrapper.removeEventListener("click",this.onClick,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.cleanUpClassName(),this.__rafID&&cancelAnimationFrame(this.__rafID)}on(C,I){return this.emitter.on(C,I)}off(C,I){return this.emitter.off(C,I)}onScrollEnd=C=>{C instanceof CustomEvent||(this.isScrolling==="smooth"||this.isScrolling===!1)&&C.stopPropagation()};dispatchScrollendEvent=()=>{this.options.wrapper.dispatchEvent(new CustomEvent("scrollend",{bubbles:this.options.wrapper===window,detail:{lenisScrollEnd:!0}}))};onTransitionEnd=C=>{if(C.propertyName.includes("overflow")){const I=this.isHorizontal?"overflow-x":"overflow-y",T=getComputedStyle(this.rootElement)[I];["hidden","clip"].includes(T)?this.internalStop():this.internalStart()}};setScroll(C){this.isHorizontal?this.options.wrapper.scrollTo({left:C,behavior:"instant"}):this.options.wrapper.scrollTo({top:C,behavior:"instant"})}onClick=C=>{const T=C.composedPath().find(A=>A instanceof HTMLAnchorElement&&A.getAttribute("href")?.includes("#"));if(T){const A=T.getAttribute("href");if(A){const h=typeof this.options.anchors=="object"&&this.options.anchors?this.options.anchors:void 0,e=`#${A.split("#")[1]}`;this.scrollTo(e,h)}}};onPointerDown=C=>{C.button===1&&this.reset()};onVirtualScroll=C=>{if(typeof this.options.virtualScroll=="function"&&this.options.virtualScroll(C)===!1)return;const{deltaX:I,deltaY:T,event:A}=C;if(this.emitter.emit("virtual-scroll",{deltaX:I,deltaY:T,event:A}),A.ctrlKey||A.lenisStopPropagation)return;const h=A.type.includes("touch"),e=A.type.includes("wheel");this.isTouching=A.type==="touchstart"||A.type==="touchmove";const l=I===0&&T===0;if(this.options.syncTouch&&h&&A.type==="touchstart"&&l&&!this.isStopped&&!this.isLocked){this.reset();return}const r=this.options.gestureOrientation==="vertical"&&T===0||this.options.gestureOrientation==="horizontal"&&I===0;if(l||r)return;let u=A.composedPath();u=u.slice(0,u.indexOf(this.rootElement));const i=this.options.prevent;if(u.find(c=>c instanceof HTMLElement&&(typeof i=="function"&&i?.(c)||c.hasAttribute?.("data-lenis-prevent")||h&&c.hasAttribute?.("data-lenis-prevent-touch")||e&&c.hasAttribute?.("data-lenis-prevent-wheel")||this.options.allowNestedScroll&&this.checkNestedScroll(c,{deltaX:I,deltaY:T}))))return;if(this.isStopped||this.isLocked){A.cancelable&&A.preventDefault();return}if(!(this.options.syncTouch&&h||this.options.smoothWheel&&e)){this.isScrolling="native",this.animate.stop(),A.lenisStopPropagation=!0;return}let o=T;this.options.gestureOrientation==="both"?o=Math.abs(T)>Math.abs(I)?T:I:this.options.gestureOrientation==="horizontal"&&(o=I),(!this.options.overscroll||this.options.infinite||this.options.wrapper!==window&&this.limit>0&&(this.animatedScroll>0&&this.animatedScroll<this.limit||this.animatedScroll===0&&T>0||this.animatedScroll===this.limit&&T<0))&&(A.lenisStopPropagation=!0),A.cancelable&&A.preventDefault();const t=h&&this.options.syncTouch,s=h&&A.type==="touchend";s&&(o=Math.sign(this.velocity)*Math.pow(Math.abs(this.velocity),this.options.touchInertiaExponent)),this.scrollTo(this.targetScroll+o,{programmatic:!1,...t?{lerp:s?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}})};resize(){this.dimensions.resize(),this.animatedScroll=this.targetScroll=this.actualScroll,this.emit()}emit(){this.emitter.emit("scroll",this)}onNativeScroll=()=>{if(this._resetVelocityTimeout!==null&&(clearTimeout(this._resetVelocityTimeout),this._resetVelocityTimeout=null),this._preventNextNativeScrollEvent){this._preventNextNativeScrollEvent=!1;return}if(this.isScrolling===!1||this.isScrolling==="native"){const C=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity,this.velocity=this.animatedScroll-C,this.direction=Math.sign(this.animatedScroll-C),this.isStopped||(this.isScrolling="native"),this.emit(),this.velocity!==0&&(this._resetVelocityTimeout=setTimeout(()=>{this.lastVelocity=this.velocity,this.velocity=0,this.isScrolling=!1,this.emit()},400))}};reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity=0,this.animate.stop()}start(){if(this.isStopped){if(this.options.autoToggle){this.rootElement.style.removeProperty("overflow");return}this.internalStart()}}internalStart(){this.isStopped&&(this.reset(),this.isStopped=!1,this.emit())}stop(){if(!this.isStopped){if(this.options.autoToggle){this.rootElement.style.setProperty("overflow","clip");return}this.internalStop()}}internalStop(){this.isStopped||(this.reset(),this.isStopped=!0,this.emit())}raf=C=>{const I=C-(this.time||C);this.time=C,this.animate.advance(I*.001),this.options.autoRaf&&(this.__rafID=requestAnimationFrame(this.raf))};scrollTo(C,{offset:I=0,immediate:T=!1,lock:A=!1,duration:h=this.options.duration,easing:e=this.options.easing,lerp:l=this.options.lerp,onStart:a,onComplete:r,force:u=!1,programmatic:i=!0,userData:f}={}){if(!((this.isStopped||this.isLocked)&&!u)){if(typeof C=="string"&&["top","left","start","#"].includes(C))C=0;else if(typeof C=="string"&&["bottom","right","end"].includes(C))C=this.limit;else{let o;if(typeof C=="string"?(o=document.querySelector(C),o||(C==="#top"?C=0:console.warn("Lenis: Target not found",C))):C instanceof HTMLElement&&C?.nodeType&&(o=C),o){if(this.options.wrapper!==window){const n=this.rootElement.getBoundingClientRect();I-=this.isHorizontal?n.left:n.top}const t=o.getBoundingClientRect();C=(this.isHorizontal?t.left:t.top)+this.animatedScroll}}if(typeof C=="number"){if(C+=I,C=Math.round(C),this.options.infinite){if(i){this.targetScroll=this.animatedScroll=this.scroll;const o=C-this.animatedScroll;o>this.limit/2?C=C-this.limit:o<-this.limit/2&&(C=C+this.limit)}}else C=Ee(0,C,this.limit);if(C===this.targetScroll){a?.(this),r?.(this);return}if(this.userData=f??{},T){this.animatedScroll=this.targetScroll=C,this.setScroll(this.scroll),this.reset(),this.preventNextNativeScrollEvent(),this.emit(),r?.(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()});return}i||(this.targetScroll=C),typeof h=="number"&&typeof e!="function"?e=we:typeof e=="function"&&typeof h!="number"&&(h=1),this.animate.fromTo(this.animatedScroll,C,{duration:h,easing:e,lerp:l,onStart:()=>{A&&(this.isLocked=!0),this.isScrolling="smooth",a?.(this)},onUpdate:(o,t)=>{this.isScrolling="smooth",this.lastVelocity=this.velocity,this.velocity=o-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=o,this.setScroll(this.scroll),i&&(this.targetScroll=o),t||this.emit(),t&&(this.reset(),this.emit(),r?.(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()}),this.preventNextNativeScrollEvent())}})}}}preventNextNativeScrollEvent(){this._preventNextNativeScrollEvent=!0,requestAnimationFrame(()=>{this._preventNextNativeScrollEvent=!1})}checkNestedScroll(C,{deltaX:I,deltaY:T}){const A=Date.now(),h=C._lenis??={};let e,l,a,r,u,i,f,o;const t=this.options.gestureOrientation;if(A-(h.time??0)>2e3){h.time=Date.now();const d=window.getComputedStyle(C);h.computedStyle=d;const p=d.overflowX,g=d.overflowY;if(e=["auto","overlay","scroll"].includes(p),l=["auto","overlay","scroll"].includes(g),h.hasOverflowX=e,h.hasOverflowY=l,!e&&!l||t==="vertical"&&!l||t==="horizontal"&&!e)return!1;u=C.scrollWidth,i=C.scrollHeight,f=C.clientWidth,o=C.clientHeight,a=u>f,r=i>o,h.isScrollableX=a,h.isScrollableY=r,h.scrollWidth=u,h.scrollHeight=i,h.clientWidth=f,h.clientHeight=o}else a=h.isScrollableX,r=h.isScrollableY,e=h.hasOverflowX,l=h.hasOverflowY,u=h.scrollWidth,i=h.scrollHeight,f=h.clientWidth,o=h.clientHeight;if(!e&&!l||!a&&!r||t==="vertical"&&(!l||!r)||t==="horizontal"&&(!e||!a))return!1;let n;if(t==="horizontal")n="x";else if(t==="vertical")n="y";else{const d=I!==0,p=T!==0;d&&e&&a&&(n="x"),p&&l&&r&&(n="y")}if(!n)return!1;let s,c,m,y,S;if(n==="x")s=C.scrollLeft,c=u-f,m=I,y=e,S=a;else if(n==="y")s=C.scrollTop,c=i-o,m=T,y=l,S=r;else return!1;return(m>0?s<c:s>0)&&y&&S}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){const C=this.options.wrapper;return this.isHorizontal?C.scrollX??C.scrollLeft:C.scrollY??C.scrollTop}get scroll(){return this.options.infinite?Je(this.animatedScroll,this.limit):this.animatedScroll}get progress(){return this.limit===0?1:this.scroll/this.limit}get isScrolling(){return this._isScrolling}set isScrolling(C){this._isScrolling!==C&&(this._isScrolling=C,this.updateClassName())}get isStopped(){return this._isStopped}set isStopped(C){this._isStopped!==C&&(this._isStopped=C,this.updateClassName())}get isLocked(){return this._isLocked}set isLocked(C){this._isLocked!==C&&(this._isLocked=C,this.updateClassName())}get isSmooth(){return this.isScrolling==="smooth"}get className(){let C="lenis";return this.options.autoToggle&&(C+=" lenis-autoToggle"),this.isStopped&&(C+=" lenis-stopped"),this.isLocked&&(C+=" lenis-locked"),this.isScrolling&&(C+=" lenis-scrolling"),this.isScrolling==="smooth"&&(C+=" lenis-smooth"),C}updateClassName(){this.cleanUpClassName(),this.rootElement.className=`${this.rootElement.className} ${this.className}`.trim()}cleanUpClassName(){this.rootElement.className=this.rootElement.className.replace(/lenis(-\w+)?/g,"").trim()}},nt=class{constructor(C){this.state=C}listeners=[];set(C){this.state=C;for(let I of this.listeners)I(this.state)}subscribe(C){return this.listeners=[...this.listeners,C],()=>{this.listeners=this.listeners.filter(I=>I!==C)}}get(){return this.state}};function st(C){const[I,T]=N.useState(C.get());return N.useEffect(()=>C.subscribe(A=>T(A)),[C]),I}var Ie=N.createContext(null),fe=new nt(null),rt=N.forwardRef(({children:C,root:I=!1,options:T={},autoRaf:A=!0,...h},e)=>{const l=N.useRef(null),a=N.useRef(null),[r,u]=N.useState(void 0);N.useImperativeHandle(e,()=>({wrapper:l.current,content:a.current,lenis:r}),[r]),N.useEffect(()=>{const t=new it({...T,...l.current&&a.current&&{wrapper:l.current,content:a.current},autoRaf:T?.autoRaf??A});return u(t),()=>{t.destroy(),u(void 0)}},[I,JSON.stringify({...T,wrapper:null,content:null})]);const i=N.useRef([]),f=N.useCallback((t,n)=>{i.current.push({callback:t,priority:n}),i.current.sort((s,c)=>s.priority-c.priority)},[]),o=N.useCallback(t=>{i.current=i.current.filter(n=>n.callback!==t)},[]);return N.useEffect(()=>{if(I&&r)return fe.set({lenis:r,addCallback:f,removeCallback:o}),()=>fe.set(null)},[I,r,f,o]),N.useEffect(()=>{if(!r)return;const t=n=>{for(let s=0;s<i.current.length;s++)i.current[s]?.callback(n)};return r.on("scroll",t),()=>{r.off("scroll",t)}},[r]),C?L.jsx(Ie.Provider,{value:{lenis:r,addCallback:f,removeCallback:o},children:I&&I!=="asChild"?C:L.jsx("div",{ref:l,...h,children:L.jsx("div",{ref:a,children:C})})}):null}),ot={};function at(C,I=[],T=0){const A=N.useContext(Ie),h=st(fe),e=A??h??ot,{lenis:l,addCallback:a,removeCallback:r}=e;return N.useEffect(()=>{},[l,a,r,T,...I]),l}const lt=({children:C})=>L.jsx(rt,{root:!0,options:{lerp:.1,duration:1.2,smoothWheel:!0},children:C}),ct=({text:C})=>{const[I,T]=N.useState(C),A=N.useRef(null),h=Ce(A,{once:!0,amount:.5}),e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",l=N.useCallback(()=>{let a=0;const r=setInterval(()=>{T(C.split("").map((u,i)=>u===`
`||u===" "?u:i<a?C[i]:e[Math.floor(Math.random()*e.length)]).join("")),a>=C.length&&clearInterval(r),a+=.5},30);return()=>clearInterval(r)},[C]);return N.useEffect(()=>{if(h)return l()},[h,l]),L.jsx("section",{className:"w-full py-16 md:py-24 px-4 overflow-hidden",children:L.jsx(V.div,{ref:A,className:"max-w-6xl mx-auto",initial:{opacity:0,y:30},animate:h?{opacity:1,y:0}:{},transition:{duration:.6,ease:"easeOut"},children:L.jsx("h2",{className:"text-[clamp(1.5rem,5vw,5rem)] font-black text-center tracking-tight text-white whitespace-pre-line leading-tight",children:I})})})},ft=({title:C,category:I,image:T,index:A,color:h})=>{const e=N.useRef(null),l=Ce(e,{amount:.3,once:!0}),[a,r]=N.useState(!1);N.useEffect(()=>{const g=()=>r(window.innerWidth<768);return g(),window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]);const u=oe(0),i=oe(0),f=te(u,{stiffness:500,damping:100}),o=te(i,{stiffness:500,damping:100}),t=ee(o,[-.5,.5],["12deg","-12deg"]),n=ee(f,[-.5,.5],["-12deg","12deg"]),s=ee(f,[-.5,.5],["0%","100%"]),c=ee(o,[-.5,.5],["0%","100%"]),m=Ne`radial-gradient(500px circle at ${s} ${c}, rgba(255,255,255,0.12), transparent 80%)`,y=g=>{if(a)return;const v=g.currentTarget.getBoundingClientRect(),w=g.clientX-v.left-v.width/2,x=g.clientY-v.top-v.height/2;u.set(w/v.width),i.set(x/v.height)},S=()=>{u.set(0),i.set(0)},{scrollYProgress:E}=He({target:e,offset:["start end","end start"]}),d=te(ee(E,[0,1],[80,-80]),{stiffness:100,damping:20}),p=A*.1;return L.jsxs(V.article,{ref:e,className:"relative w-full mb-20 md:mb-32 flex items-center justify-center",style:{perspective:1e3},initial:{opacity:0,y:60},animate:l?{opacity:1,y:0}:{},transition:{duration:.8,delay:p,ease:[.22,1,.36,1]},onMouseMove:y,onMouseLeave:S,children:[L.jsxs(V.div,{className:"relative w-full md:w-[85%] aspect-[4/3] md:aspect-[16/10] group",style:a?void 0:{rotateX:t,rotateY:n,transformStyle:"preserve-3d"},children:[L.jsx("div",{className:"absolute -inset-4 rounded-3xl opacity-0 blur-2xl transition-opacity duration-700 group-hover:opacity-50 -z-10",style:{background:h}}),L.jsxs(V.div,{className:"relative w-full h-full rounded-2xl md:rounded-3xl overflow-hidden border border-white/10 bg-cover bg-center shadow-2xl",style:{backgroundImage:`url(${T})`},initial:{scale:1.05},animate:l?{scale:1}:{},transition:{duration:1,ease:"easeOut"},children:[!a&&L.jsx(V.div,{className:"absolute inset-0 z-10 pointer-events-none mix-blend-overlay",style:{background:m}}),L.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"})]})]}),L.jsxs(V.div,{style:a?void 0:{y:d},className:"absolute z-20 pointer-events-none text-center",children:[L.jsx("h3",{className:"text-[clamp(2rem,8vw,6rem)] font-black leading-none tracking-tight text-white drop-shadow-[0_2px_10px_rgba(0,0,0,0.8)]",children:C}),L.jsx("p",{className:"text-sm md:text-lg font-light tracking-[0.3em] uppercase mt-3 text-white/80",children:I})]})]})},ut=()=>{const C=[{title:"NEBULA",category:"Immersive Experience",image:"https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=60&w=1200&auto=format&fit=crop",color:"#8b5cf6"},{title:"VOID",category:"Digital Product",image:"https://images.unsplash.com/photo-1478760329108-5c3ed9d495a0?q=60&w=1200&auto=format&fit=crop",color:"#3b82f6"},{title:"ECHO",category:"Sound Design",image:"https://images.unsplash.com/photo-1550684848-fac1c5b4e853?q=60&w=1200&auto=format&fit=crop",color:"#10b981"},{title:"FLUX",category:"Motion Graphics",image:"https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=60&w=1200&auto=format&fit=crop",color:"#f43f5e"}];return L.jsx("section",{id:"work",className:"w-full py-20 md:py-32 px-4 md:px-8",children:L.jsxs("div",{className:"max-w-7xl mx-auto",children:[L.jsx("h2",{className:"sr-only",children:"Our Work"}),C.map((I,T)=>L.jsx(ft,{...I,index:T},I.title))]})})},ht=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,Re=({children:C,className:I=""})=>{const T=N.useRef(null),[A,h]=N.useState({x:0,y:0}),[e]=N.useState(ht),l=r=>{if(e||!T.current)return;const{clientX:u,clientY:i}=r,{height:f,width:o,left:t,top:n}=T.current.getBoundingClientRect(),s=u-(t+o/2),c=i-(n+f/2);h({x:s*.15,y:c*.15})},a=()=>h({x:0,y:0});return e?L.jsx("div",{className:I,children:C}):L.jsx(V.div,{ref:T,className:I,onMouseMove:l,onMouseLeave:a,animate:A,transition:{type:"spring",stiffness:200,damping:15},children:C})},dt=()=>{const C=at(),[I,T]=N.useState(!1),A=[{name:"Work",href:"#work"},{name:"About",href:"#about"},{name:"Contact",href:"#contact"}],h=(e,l)=>{e.preventDefault(),T(!1),C&&C.scrollTo(l)};return L.jsxs(L.Fragment,{children:[L.jsx("nav",{className:"hidden md:flex fixed bottom-8 left-1/2 -translate-x-1/2 z-50 items-center gap-1 px-2 py-2 bg-white/5 backdrop-blur-md border border-white/10 rounded-full",children:A.map(e=>L.jsx(Re,{children:L.jsx("a",{href:e.href,onClick:l=>h(l,e.href),className:"block px-5 py-2.5 text-sm font-medium uppercase tracking-widest text-white/80 hover:text-white transition-colors",children:e.name})},e.name))}),L.jsx("div",{className:"md:hidden fixed bottom-6 right-6 z-50",children:L.jsx("button",{onClick:()=>T(!I),className:"w-12 h-12 flex items-center justify-center bg-white/10 backdrop-blur-md border border-white/10 rounded-full","aria-label":I?"Close menu":"Open menu","aria-expanded":I,children:L.jsxs("div",{className:"w-5 h-4 flex flex-col justify-between",children:[L.jsx(V.span,{className:"block h-0.5 bg-white origin-center",animate:I?{rotate:45,y:7}:{rotate:0,y:0},transition:{duration:.2}}),L.jsx(V.span,{className:"block h-0.5 bg-white",animate:I?{opacity:0}:{opacity:1},transition:{duration:.2}}),L.jsx(V.span,{className:"block h-0.5 bg-white origin-center",animate:I?{rotate:-45,y:-7}:{rotate:0,y:0},transition:{duration:.2}})]})})}),L.jsx(Me,{children:I&&L.jsx(V.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"md:hidden fixed inset-0 z-40 bg-black/90 backdrop-blur-lg flex items-center justify-center",children:L.jsx("nav",{className:"flex flex-col items-center gap-8",children:A.map((e,l)=>L.jsx(V.a,{href:e.href,onClick:a=>h(a,e.href),initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{delay:l*.1},className:"text-3xl font-bold uppercase tracking-widest text-white",children:e.name},e.name))})})})]})};var re={exports:{}};var vt=re.exports,Se;function pt(){return Se||(Se=1,(function(C,I){(function(A,h){C.exports=h()})(vt,function(){return(function(T){var A={};function h(e){if(A[e])return A[e].exports;var l=A[e]={i:e,l:!1,exports:{}};return T[e].call(l.exports,l,l.exports,h),l.l=!0,l.exports}return h.m=T,h.c=A,h.d=function(e,l,a){h.o(e,l)||Object.defineProperty(e,l,{enumerable:!0,get:a})},h.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},h.t=function(e,l){if(l&1&&(e=h(e)),l&8||l&4&&typeof e=="object"&&e&&e.__esModule)return e;var a=Object.create(null);if(h.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),l&2&&typeof e!="string")for(var r in e)h.d(a,r,(function(u){return e[u]}).bind(null,r));return a},h.n=function(e){var l=e&&e.__esModule?function(){return e.default}:function(){return e};return h.d(l,"a",l),l},h.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)},h.p="",h(h.s=20)})([(function(T,A){var h={};T.exports=h,(function(){h._baseDelta=1e3/60,h._nextId=0,h._seed=0,h._nowStartTime=+new Date,h._warnedOnce={},h._decomp=null,h.extend=function(l,a){var r,u;typeof a=="boolean"?(r=2,u=a):(r=1,u=!0);for(var i=r;i<arguments.length;i++){var f=arguments[i];if(f)for(var o in f)u&&f[o]&&f[o].constructor===Object&&(!l[o]||l[o].constructor===Object)?(l[o]=l[o]||{},h.extend(l[o],u,f[o])):l[o]=f[o]}return l},h.clone=function(l,a){return h.extend({},a,l)},h.keys=function(l){if(Object.keys)return Object.keys(l);var a=[];for(var r in l)a.push(r);return a},h.values=function(l){var a=[];if(Object.keys){for(var r=Object.keys(l),u=0;u<r.length;u++)a.push(l[r[u]]);return a}for(var i in l)a.push(l[i]);return a},h.get=function(l,a,r,u){a=a.split(".").slice(r,u);for(var i=0;i<a.length;i+=1)l=l[a[i]];return l},h.set=function(l,a,r,u,i){var f=a.split(".").slice(u,i);return h.get(l,a,0,-1)[f[f.length-1]]=r,r},h.shuffle=function(l){for(var a=l.length-1;a>0;a--){var r=Math.floor(h.random()*(a+1)),u=l[a];l[a]=l[r],l[r]=u}return l},h.choose=function(l){return l[Math.floor(h.random()*l.length)]},h.isElement=function(l){return typeof HTMLElement<"u"?l instanceof HTMLElement:!!(l&&l.nodeType&&l.nodeName)},h.isArray=function(l){return Object.prototype.toString.call(l)==="[object Array]"},h.isFunction=function(l){return typeof l=="function"},h.isPlainObject=function(l){return typeof l=="object"&&l.constructor===Object},h.isString=function(l){return toString.call(l)==="[object String]"},h.clamp=function(l,a,r){return l<a?a:l>r?r:l},h.sign=function(l){return l<0?-1:1},h.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-h._nowStartTime},h.random=function(l,a){return l=typeof l<"u"?l:0,a=typeof a<"u"?a:1,l+e()*(a-l)};var e=function(){return h._seed=(h._seed*9301+49297)%233280,h._seed/233280};h.colorToNumber=function(l){return l=l.replace("#",""),l.length==3&&(l=l.charAt(0)+l.charAt(0)+l.charAt(1)+l.charAt(1)+l.charAt(2)+l.charAt(2)),parseInt(l,16)},h.logLevel=1,h.log=function(){console&&h.logLevel>0&&h.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},h.info=function(){console&&h.logLevel>0&&h.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},h.warn=function(){console&&h.logLevel>0&&h.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},h.warnOnce=function(){var l=Array.prototype.slice.call(arguments).join(" ");h._warnedOnce[l]||(h.warn(l),h._warnedOnce[l]=!0)},h.deprecated=function(l,a,r){l[a]=h.chain(function(){h.warnOnce("ðŸ”… deprecated ðŸ”…",r)},l[a])},h.nextId=function(){return h._nextId++},h.indexOf=function(l,a){if(l.indexOf)return l.indexOf(a);for(var r=0;r<l.length;r++)if(l[r]===a)return r;return-1},h.map=function(l,a){if(l.map)return l.map(a);for(var r=[],u=0;u<l.length;u+=1)r.push(a(l[u]));return r},h.topologicalSort=function(l){var a=[],r=[],u=[];for(var i in l)!r[i]&&!u[i]&&h._topologicalSort(i,r,u,l,a);return a},h._topologicalSort=function(l,a,r,u,i){var f=u[l]||[];r[l]=!0;for(var o=0;o<f.length;o+=1){var t=f[o];r[t]||a[t]||h._topologicalSort(t,a,r,u,i)}r[l]=!1,a[l]=!0,i.push(l)},h.chain=function(){for(var l=[],a=0;a<arguments.length;a+=1){var r=arguments[a];r._chained?l.push.apply(l,r._chained):l.push(r)}var u=function(){for(var i,f=new Array(arguments.length),o=0,t=arguments.length;o<t;o++)f[o]=arguments[o];for(o=0;o<l.length;o+=1){var n=l[o].apply(i,f);typeof n<"u"&&(i=n)}return i};return u._chained=l,u},h.chainPathBefore=function(l,a,r){return h.set(l,a,h.chain(r,h.get(l,a)))},h.chainPathAfter=function(l,a,r){return h.set(l,a,h.chain(h.get(l,a),r))},h.setDecomp=function(l){h._decomp=l},h.getDecomp=function(){var l=h._decomp;try{!l&&typeof window<"u"&&(l=window.decomp),!l&&typeof xe<"u"&&(l=xe.decomp)}catch{l=null}return l}})()}),(function(T,A){var h={};T.exports=h,(function(){h.create=function(e){var l={min:{x:0,y:0},max:{x:0,y:0}};return e&&h.update(l,e),l},h.update=function(e,l,a){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var r=0;r<l.length;r++){var u=l[r];u.x>e.max.x&&(e.max.x=u.x),u.x<e.min.x&&(e.min.x=u.x),u.y>e.max.y&&(e.max.y=u.y),u.y<e.min.y&&(e.min.y=u.y)}a&&(a.x>0?e.max.x+=a.x:e.min.x+=a.x,a.y>0?e.max.y+=a.y:e.min.y+=a.y)},h.contains=function(e,l){return l.x>=e.min.x&&l.x<=e.max.x&&l.y>=e.min.y&&l.y<=e.max.y},h.overlaps=function(e,l){return e.min.x<=l.max.x&&e.max.x>=l.min.x&&e.max.y>=l.min.y&&e.min.y<=l.max.y},h.translate=function(e,l){e.min.x+=l.x,e.max.x+=l.x,e.min.y+=l.y,e.max.y+=l.y},h.shift=function(e,l){var a=e.max.x-e.min.x,r=e.max.y-e.min.y;e.min.x=l.x,e.max.x=l.x+a,e.min.y=l.y,e.max.y=l.y+r}})()}),(function(T,A){var h={};T.exports=h,(function(){h.create=function(e,l){return{x:e||0,y:l||0}},h.clone=function(e){return{x:e.x,y:e.y}},h.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},h.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},h.rotate=function(e,l,a){var r=Math.cos(l),u=Math.sin(l);a||(a={});var i=e.x*r-e.y*u;return a.y=e.x*u+e.y*r,a.x=i,a},h.rotateAbout=function(e,l,a,r){var u=Math.cos(l),i=Math.sin(l);r||(r={});var f=a.x+((e.x-a.x)*u-(e.y-a.y)*i);return r.y=a.y+((e.x-a.x)*i+(e.y-a.y)*u),r.x=f,r},h.normalise=function(e){var l=h.magnitude(e);return l===0?{x:0,y:0}:{x:e.x/l,y:e.y/l}},h.dot=function(e,l){return e.x*l.x+e.y*l.y},h.cross=function(e,l){return e.x*l.y-e.y*l.x},h.cross3=function(e,l,a){return(l.x-e.x)*(a.y-e.y)-(l.y-e.y)*(a.x-e.x)},h.add=function(e,l,a){return a||(a={}),a.x=e.x+l.x,a.y=e.y+l.y,a},h.sub=function(e,l,a){return a||(a={}),a.x=e.x-l.x,a.y=e.y-l.y,a},h.mult=function(e,l){return{x:e.x*l,y:e.y*l}},h.div=function(e,l){return{x:e.x/l,y:e.y/l}},h.perp=function(e,l){return l=l===!0?-1:1,{x:l*-e.y,y:l*e.x}},h.neg=function(e){return{x:-e.x,y:-e.y}},h.angle=function(e,l){return Math.atan2(l.y-e.y,l.x-e.x)},h._temp=[h.create(),h.create(),h.create(),h.create(),h.create(),h.create()]})()}),(function(T,A,h){var e={};T.exports=e;var l=h(2),a=h(0);(function(){e.create=function(r,u){for(var i=[],f=0;f<r.length;f++){var o=r[f],t={x:o.x,y:o.y,index:f,body:u,isInternal:!1};i.push(t)}return i},e.fromPath=function(r,u){var i=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,f=[];return r.replace(i,function(o,t,n){f.push({x:parseFloat(t),y:parseFloat(n)})}),e.create(f,u)},e.centre=function(r){for(var u=e.area(r,!0),i={x:0,y:0},f,o,t,n=0;n<r.length;n++)t=(n+1)%r.length,f=l.cross(r[n],r[t]),o=l.mult(l.add(r[n],r[t]),f),i=l.add(i,o);return l.div(i,6*u)},e.mean=function(r){for(var u={x:0,y:0},i=0;i<r.length;i++)u.x+=r[i].x,u.y+=r[i].y;return l.div(u,r.length)},e.area=function(r,u){for(var i=0,f=r.length-1,o=0;o<r.length;o++)i+=(r[f].x-r[o].x)*(r[f].y+r[o].y),f=o;return u?i/2:Math.abs(i)/2},e.inertia=function(r,u){for(var i=0,f=0,o=r,t,n,s=0;s<o.length;s++)n=(s+1)%o.length,t=Math.abs(l.cross(o[n],o[s])),i+=t*(l.dot(o[n],o[n])+l.dot(o[n],o[s])+l.dot(o[s],o[s])),f+=t;return u/6*(i/f)},e.translate=function(r,u,i){i=typeof i<"u"?i:1;var f=r.length,o=u.x*i,t=u.y*i,n;for(n=0;n<f;n++)r[n].x+=o,r[n].y+=t;return r},e.rotate=function(r,u,i){if(u!==0){var f=Math.cos(u),o=Math.sin(u),t=i.x,n=i.y,s=r.length,c,m,y,S;for(S=0;S<s;S++)c=r[S],m=c.x-t,y=c.y-n,c.x=t+(m*f-y*o),c.y=n+(m*o+y*f);return r}},e.contains=function(r,u){for(var i=u.x,f=u.y,o=r.length,t=r[o-1],n,s=0;s<o;s++){if(n=r[s],(i-t.x)*(n.y-t.y)+(f-t.y)*(t.x-n.x)>0)return!1;t=n}return!0},e.scale=function(r,u,i,f){if(u===1&&i===1)return r;f=f||e.centre(r);for(var o,t,n=0;n<r.length;n++)o=r[n],t=l.sub(o,f),r[n].x=f.x+t.x*u,r[n].y=f.y+t.y*i;return r},e.chamfer=function(r,u,i,f,o){typeof u=="number"?u=[u]:u=u||[8],i=typeof i<"u"?i:-1,f=f||2,o=o||14;for(var t=[],n=0;n<r.length;n++){var s=r[n-1>=0?n-1:r.length-1],c=r[n],m=r[(n+1)%r.length],y=u[n<u.length?n:u.length-1];if(y===0){t.push(c);continue}var S=l.normalise({x:c.y-s.y,y:s.x-c.x}),E=l.normalise({x:m.y-c.y,y:c.x-m.x}),d=Math.sqrt(2*Math.pow(y,2)),p=l.mult(a.clone(S),y),g=l.normalise(l.mult(l.add(S,E),.5)),v=l.sub(c,l.mult(g,d)),w=i;i===-1&&(w=Math.pow(y,.32)*1.75),w=a.clamp(w,f,o),w%2===1&&(w+=1);for(var x=Math.acos(l.dot(S,E)),P=x/w,M=0;M<w;M++)t.push(l.add(l.rotate(p,P*M),v))}return t},e.clockwiseSort=function(r){var u=e.mean(r);return r.sort(function(i,f){return l.angle(u,i)-l.angle(u,f)}),r},e.isConvex=function(r){var u=0,i=r.length,f,o,t,n;if(i<3)return null;for(f=0;f<i;f++)if(o=(f+1)%i,t=(f+2)%i,n=(r[o].x-r[f].x)*(r[t].y-r[o].y),n-=(r[o].y-r[f].y)*(r[t].x-r[o].x),n<0?u|=1:n>0&&(u|=2),u===3)return!1;return u!==0?!0:null},e.hull=function(r){var u=[],i=[],f,o;for(r=r.slice(0),r.sort(function(t,n){var s=t.x-n.x;return s!==0?s:t.y-n.y}),o=0;o<r.length;o+=1){for(f=r[o];i.length>=2&&l.cross3(i[i.length-2],i[i.length-1],f)<=0;)i.pop();i.push(f)}for(o=r.length-1;o>=0;o-=1){for(f=r[o];u.length>=2&&l.cross3(u[u.length-2],u[u.length-1],f)<=0;)u.pop();u.push(f)}return u.pop(),i.pop(),u.concat(i)}})()}),(function(T,A,h){var e={};T.exports=e;var l=h(3),a=h(2),r=h(7),u=h(0),i=h(1),f=h(11);(function(){e._timeCorrection=!0,e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e._baseDelta=1e3/60,e.create=function(t){var n={id:u.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:l.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},s=u.extend(n,t);return o(s,t),s},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var o=function(t,n){n=n||{},e.set(t,{bounds:t.bounds||i.create(t.vertices),positionPrev:t.positionPrev||a.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),l.rotate(t.vertices,t.angle,t.position),f.rotate(t.axes,t.angle),i.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:n.axes||t.axes,area:n.area||t.area,mass:n.mass||t.mass,inertia:n.inertia||t.inertia});var s=t.isStatic?"#14151f":u.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),c=t.isStatic?"#555":"#ccc",m=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||s,t.render.strokeStyle=t.render.strokeStyle||c,t.render.lineWidth=t.render.lineWidth||m,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,n,s){var c;typeof n=="string"&&(c=n,n={},n[c]=s);for(c in n)if(Object.prototype.hasOwnProperty.call(n,c))switch(s=n[c],c){case"isStatic":e.setStatic(t,s);break;case"isSleeping":r.set(t,s);break;case"mass":e.setMass(t,s);break;case"density":e.setDensity(t,s);break;case"inertia":e.setInertia(t,s);break;case"vertices":e.setVertices(t,s);break;case"position":e.setPosition(t,s);break;case"angle":e.setAngle(t,s);break;case"velocity":e.setVelocity(t,s);break;case"angularVelocity":e.setAngularVelocity(t,s);break;case"speed":e.setSpeed(t,s);break;case"angularSpeed":e.setAngularSpeed(t,s);break;case"parts":e.setParts(t,s);break;case"centre":e.setCentre(t,s);break;default:t[c]=s}},e.setStatic=function(t,n){for(var s=0;s<t.parts.length;s++){var c=t.parts[s];n?(c.isStatic||(c._original={restitution:c.restitution,friction:c.friction,mass:c.mass,inertia:c.inertia,density:c.density,inverseMass:c.inverseMass,inverseInertia:c.inverseInertia}),c.restitution=0,c.friction=1,c.mass=c.inertia=c.density=1/0,c.inverseMass=c.inverseInertia=0,c.positionPrev.x=c.position.x,c.positionPrev.y=c.position.y,c.anglePrev=c.angle,c.angularVelocity=0,c.speed=0,c.angularSpeed=0,c.motion=0):c._original&&(c.restitution=c._original.restitution,c.friction=c._original.friction,c.mass=c._original.mass,c.inertia=c._original.inertia,c.density=c._original.density,c.inverseMass=c._original.inverseMass,c.inverseInertia=c._original.inverseInertia,c._original=null),c.isStatic=n}},e.setMass=function(t,n){var s=t.inertia/(t.mass/6);t.inertia=s*(n/6),t.inverseInertia=1/t.inertia,t.mass=n,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,n){e.setMass(t,n*t.area),t.density=n},e.setInertia=function(t,n){t.inertia=n,t.inverseInertia=1/t.inertia},e.setVertices=function(t,n){n[0].body===t?t.vertices=n:t.vertices=l.create(n,t),t.axes=f.fromVertices(t.vertices),t.area=l.area(t.vertices),e.setMass(t,t.density*t.area);var s=l.centre(t.vertices);l.translate(t.vertices,s,-1),e.setInertia(t,e._inertiaScale*l.inertia(t.vertices,t.mass)),l.translate(t.vertices,t.position),i.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,n,s){var c;for(n=n.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,c=0;c<n.length;c++){var m=n[c];m!==t&&(m.parent=t,t.parts.push(m))}if(t.parts.length!==1){if(s=typeof s<"u"?s:!0,s){var y=[];for(c=0;c<n.length;c++)y=y.concat(n[c].vertices);l.clockwiseSort(y);var S=l.hull(y),E=l.centre(S);e.setVertices(t,S),l.translate(t.vertices,E)}var d=e._totalProperties(t);t.area=d.area,t.parent=t,t.position.x=d.centre.x,t.position.y=d.centre.y,t.positionPrev.x=d.centre.x,t.positionPrev.y=d.centre.y,e.setMass(t,d.mass),e.setInertia(t,d.inertia),e.setPosition(t,d.centre)}},e.setCentre=function(t,n,s){s?(t.positionPrev.x+=n.x,t.positionPrev.y+=n.y,t.position.x+=n.x,t.position.y+=n.y):(t.positionPrev.x=n.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=n.y-(t.position.y-t.positionPrev.y),t.position.x=n.x,t.position.y=n.y)},e.setPosition=function(t,n,s){var c=a.sub(n,t.position);s?(t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.velocity.x=c.x,t.velocity.y=c.y,t.speed=a.magnitude(c)):(t.positionPrev.x+=c.x,t.positionPrev.y+=c.y);for(var m=0;m<t.parts.length;m++){var y=t.parts[m];y.position.x+=c.x,y.position.y+=c.y,l.translate(y.vertices,c),i.update(y.bounds,y.vertices,t.velocity)}},e.setAngle=function(t,n,s){var c=n-t.angle;s?(t.anglePrev=t.angle,t.angularVelocity=c,t.angularSpeed=Math.abs(c)):t.anglePrev+=c;for(var m=0;m<t.parts.length;m++){var y=t.parts[m];y.angle+=c,l.rotate(y.vertices,c,t.position),f.rotate(y.axes,c),i.update(y.bounds,y.vertices,t.velocity),m>0&&a.rotateAbout(y.position,c,t.position,y.position)}},e.setVelocity=function(t,n){var s=t.deltaTime/e._baseDelta;t.positionPrev.x=t.position.x-n.x*s,t.positionPrev.y=t.position.y-n.y*s,t.velocity.x=(t.position.x-t.positionPrev.x)/s,t.velocity.y=(t.position.y-t.positionPrev.y)/s,t.speed=a.magnitude(t.velocity)},e.getVelocity=function(t){var n=e._baseDelta/t.deltaTime;return{x:(t.position.x-t.positionPrev.x)*n,y:(t.position.y-t.positionPrev.y)*n}},e.getSpeed=function(t){return a.magnitude(e.getVelocity(t))},e.setSpeed=function(t,n){e.setVelocity(t,a.mult(a.normalise(e.getVelocity(t)),n))},e.setAngularVelocity=function(t,n){var s=t.deltaTime/e._baseDelta;t.anglePrev=t.angle-n*s,t.angularVelocity=(t.angle-t.anglePrev)/s,t.angularSpeed=Math.abs(t.angularVelocity)},e.getAngularVelocity=function(t){return(t.angle-t.anglePrev)*e._baseDelta/t.deltaTime},e.getAngularSpeed=function(t){return Math.abs(e.getAngularVelocity(t))},e.setAngularSpeed=function(t,n){e.setAngularVelocity(t,u.sign(e.getAngularVelocity(t))*n)},e.translate=function(t,n,s){e.setPosition(t,a.add(t.position,n),s)},e.rotate=function(t,n,s,c){if(!s)e.setAngle(t,t.angle+n,c);else{var m=Math.cos(n),y=Math.sin(n),S=t.position.x-s.x,E=t.position.y-s.y;e.setPosition(t,{x:s.x+(S*m-E*y),y:s.y+(S*y+E*m)},c),e.setAngle(t,t.angle+n,c)}},e.scale=function(t,n,s,c){var m=0,y=0;c=c||t.position;for(var S=0;S<t.parts.length;S++){var E=t.parts[S];l.scale(E.vertices,n,s,c),E.axes=f.fromVertices(E.vertices),E.area=l.area(E.vertices),e.setMass(E,t.density*E.area),l.translate(E.vertices,{x:-E.position.x,y:-E.position.y}),e.setInertia(E,e._inertiaScale*l.inertia(E.vertices,E.mass)),l.translate(E.vertices,{x:E.position.x,y:E.position.y}),S>0&&(m+=E.area,y+=E.inertia),E.position.x=c.x+(E.position.x-c.x)*n,E.position.y=c.y+(E.position.y-c.y)*s,i.update(E.bounds,E.vertices,t.velocity)}t.parts.length>1&&(t.area=m,t.isStatic||(e.setMass(t,t.density*m),e.setInertia(t,y))),t.circleRadius&&(n===s?t.circleRadius*=n:t.circleRadius=null)},e.update=function(t,n){n=(typeof n<"u"?n:1e3/60)*t.timeScale;var s=n*n,c=e._timeCorrection?n/(t.deltaTime||n):1,m=1-t.frictionAir*(n/u._baseDelta),y=(t.position.x-t.positionPrev.x)*c,S=(t.position.y-t.positionPrev.y)*c;t.velocity.x=y*m+t.force.x/t.mass*s,t.velocity.y=S*m+t.force.y/t.mass*s,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.deltaTime=n,t.angularVelocity=(t.angle-t.anglePrev)*m*c+t.torque/t.inertia*s,t.anglePrev=t.angle,t.angle+=t.angularVelocity;for(var E=0;E<t.parts.length;E++){var d=t.parts[E];l.translate(d.vertices,t.velocity),E>0&&(d.position.x+=t.velocity.x,d.position.y+=t.velocity.y),t.angularVelocity!==0&&(l.rotate(d.vertices,t.angularVelocity,t.position),f.rotate(d.axes,t.angularVelocity),E>0&&a.rotateAbout(d.position,t.angularVelocity,t.position,d.position)),i.update(d.bounds,d.vertices,t.velocity)}},e.updateVelocities=function(t){var n=e._baseDelta/t.deltaTime,s=t.velocity;s.x=(t.position.x-t.positionPrev.x)*n,s.y=(t.position.y-t.positionPrev.y)*n,t.speed=Math.sqrt(s.x*s.x+s.y*s.y),t.angularVelocity=(t.angle-t.anglePrev)*n,t.angularSpeed=Math.abs(t.angularVelocity)},e.applyForce=function(t,n,s){var c={x:n.x-t.position.x,y:n.y-t.position.y};t.force.x+=s.x,t.force.y+=s.y,t.torque+=c.x*s.y-c.y*s.x},e._totalProperties=function(t){for(var n={mass:0,area:0,inertia:0,centre:{x:0,y:0}},s=t.parts.length===1?0:1;s<t.parts.length;s++){var c=t.parts[s],m=c.mass!==1/0?c.mass:1;n.mass+=m,n.area+=c.area,n.inertia+=c.inertia,n.centre=a.add(n.centre,a.mult(c.position,m))}return n.centre=a.div(n.centre,n.mass),n}})()}),(function(T,A,h){var e={};T.exports=e;var l=h(0);(function(){e.on=function(a,r,u){for(var i=r.split(" "),f,o=0;o<i.length;o++)f=i[o],a.events=a.events||{},a.events[f]=a.events[f]||[],a.events[f].push(u);return u},e.off=function(a,r,u){if(!r){a.events={};return}typeof r=="function"&&(u=r,r=l.keys(a.events).join(" "));for(var i=r.split(" "),f=0;f<i.length;f++){var o=a.events[i[f]],t=[];if(u&&o)for(var n=0;n<o.length;n++)o[n]!==u&&t.push(o[n]);a.events[i[f]]=t}},e.trigger=function(a,r,u){var i,f,o,t,n=a.events;if(n&&l.keys(n).length>0){u||(u={}),i=r.split(" ");for(var s=0;s<i.length;s++)if(f=i[s],o=n[f],o){t=l.clone(u,!1),t.name=f,t.source=a;for(var c=0;c<o.length;c++)o[c].apply(a,[t])}}}})()}),(function(T,A,h){var e={};T.exports=e;var l=h(5),a=h(0),r=h(1),u=h(4);(function(){e.create=function(i){return a.extend({id:a.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},i)},e.setModified=function(i,f,o,t){if(i.isModified=f,f&&i.cache&&(i.cache.allBodies=null,i.cache.allConstraints=null,i.cache.allComposites=null),o&&i.parent&&e.setModified(i.parent,f,o,t),t)for(var n=0;n<i.composites.length;n++){var s=i.composites[n];e.setModified(s,f,o,t)}},e.add=function(i,f){var o=[].concat(f);l.trigger(i,"beforeAdd",{object:f});for(var t=0;t<o.length;t++){var n=o[t];switch(n.type){case"body":if(n.parent!==n){a.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(i,n);break;case"constraint":e.addConstraint(i,n);break;case"composite":e.addComposite(i,n);break;case"mouseConstraint":e.addConstraint(i,n.constraint);break}}return l.trigger(i,"afterAdd",{object:f}),i},e.remove=function(i,f,o){var t=[].concat(f);l.trigger(i,"beforeRemove",{object:f});for(var n=0;n<t.length;n++){var s=t[n];switch(s.type){case"body":e.removeBody(i,s,o);break;case"constraint":e.removeConstraint(i,s,o);break;case"composite":e.removeComposite(i,s,o);break;case"mouseConstraint":e.removeConstraint(i,s.constraint);break}}return l.trigger(i,"afterRemove",{object:f}),i},e.addComposite=function(i,f){return i.composites.push(f),f.parent=i,e.setModified(i,!0,!0,!1),i},e.removeComposite=function(i,f,o){var t=a.indexOf(i.composites,f);if(t!==-1){var n=e.allBodies(f);e.removeCompositeAt(i,t);for(var s=0;s<n.length;s++)n[s].sleepCounter=0}if(o)for(var s=0;s<i.composites.length;s++)e.removeComposite(i.composites[s],f,!0);return i},e.removeCompositeAt=function(i,f){return i.composites.splice(f,1),e.setModified(i,!0,!0,!1),i},e.addBody=function(i,f){return i.bodies.push(f),e.setModified(i,!0,!0,!1),i},e.removeBody=function(i,f,o){var t=a.indexOf(i.bodies,f);if(t!==-1&&(e.removeBodyAt(i,t),f.sleepCounter=0),o)for(var n=0;n<i.composites.length;n++)e.removeBody(i.composites[n],f,!0);return i},e.removeBodyAt=function(i,f){return i.bodies.splice(f,1),e.setModified(i,!0,!0,!1),i},e.addConstraint=function(i,f){return i.constraints.push(f),e.setModified(i,!0,!0,!1),i},e.removeConstraint=function(i,f,o){var t=a.indexOf(i.constraints,f);if(t!==-1&&e.removeConstraintAt(i,t),o)for(var n=0;n<i.composites.length;n++)e.removeConstraint(i.composites[n],f,!0);return i},e.removeConstraintAt=function(i,f){return i.constraints.splice(f,1),e.setModified(i,!0,!0,!1),i},e.clear=function(i,f,o){if(o)for(var t=0;t<i.composites.length;t++)e.clear(i.composites[t],f,!0);return f?i.bodies=i.bodies.filter(function(n){return n.isStatic}):i.bodies.length=0,i.constraints.length=0,i.composites.length=0,e.setModified(i,!0,!0,!1),i},e.allBodies=function(i){if(i.cache&&i.cache.allBodies)return i.cache.allBodies;for(var f=[].concat(i.bodies),o=0;o<i.composites.length;o++)f=f.concat(e.allBodies(i.composites[o]));return i.cache&&(i.cache.allBodies=f),f},e.allConstraints=function(i){if(i.cache&&i.cache.allConstraints)return i.cache.allConstraints;for(var f=[].concat(i.constraints),o=0;o<i.composites.length;o++)f=f.concat(e.allConstraints(i.composites[o]));return i.cache&&(i.cache.allConstraints=f),f},e.allComposites=function(i){if(i.cache&&i.cache.allComposites)return i.cache.allComposites;for(var f=[].concat(i.composites),o=0;o<i.composites.length;o++)f=f.concat(e.allComposites(i.composites[o]));return i.cache&&(i.cache.allComposites=f),f},e.get=function(i,f,o){var t,n;switch(o){case"body":t=e.allBodies(i);break;case"constraint":t=e.allConstraints(i);break;case"composite":t=e.allComposites(i).concat(i);break}return t?(n=t.filter(function(s){return s.id.toString()===f.toString()}),n.length===0?null:n[0]):null},e.move=function(i,f,o){return e.remove(i,f),e.add(o,f),i},e.rebase=function(i){for(var f=e.allBodies(i).concat(e.allConstraints(i)).concat(e.allComposites(i)),o=0;o<f.length;o++)f[o].id=a.nextId();return i},e.translate=function(i,f,o){for(var t=o?e.allBodies(i):i.bodies,n=0;n<t.length;n++)u.translate(t[n],f);return i},e.rotate=function(i,f,o,t){for(var n=Math.cos(f),s=Math.sin(f),c=t?e.allBodies(i):i.bodies,m=0;m<c.length;m++){var y=c[m],S=y.position.x-o.x,E=y.position.y-o.y;u.setPosition(y,{x:o.x+(S*n-E*s),y:o.y+(S*s+E*n)}),u.rotate(y,f)}return i},e.scale=function(i,f,o,t,n){for(var s=n?e.allBodies(i):i.bodies,c=0;c<s.length;c++){var m=s[c],y=m.position.x-t.x,S=m.position.y-t.y;u.setPosition(m,{x:t.x+y*f,y:t.y+S*o}),u.scale(m,f,o)}return i},e.bounds=function(i){for(var f=e.allBodies(i),o=[],t=0;t<f.length;t+=1){var n=f[t];o.push(n.bounds.min,n.bounds.max)}return r.create(o)}})()}),(function(T,A,h){var e={};T.exports=e;var l=h(4),a=h(5),r=h(0);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(u,i){for(var f=i/r._baseDelta,o=e._motionSleepThreshold,t=0;t<u.length;t++){var n=u[t],s=l.getSpeed(n),c=l.getAngularSpeed(n),m=s*s+c*c;if(n.force.x!==0||n.force.y!==0){e.set(n,!1);continue}var y=Math.min(n.motion,m),S=Math.max(n.motion,m);n.motion=e._minBias*y+(1-e._minBias)*S,n.sleepThreshold>0&&n.motion<o?(n.sleepCounter+=1,n.sleepCounter>=n.sleepThreshold/f&&e.set(n,!0)):n.sleepCounter>0&&(n.sleepCounter-=1)}},e.afterCollisions=function(u){for(var i=e._motionSleepThreshold,f=0;f<u.length;f++){var o=u[f];if(o.isActive){var t=o.collision,n=t.bodyA.parent,s=t.bodyB.parent;if(!(n.isSleeping&&s.isSleeping||n.isStatic||s.isStatic)&&(n.isSleeping||s.isSleeping)){var c=n.isSleeping&&!n.isStatic?n:s,m=c===n?s:n;!c.isStatic&&m.motion>i&&e.set(c,!1)}}}},e.set=function(u,i){var f=u.isSleeping;i?(u.isSleeping=!0,u.sleepCounter=u.sleepThreshold,u.positionImpulse.x=0,u.positionImpulse.y=0,u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.anglePrev=u.angle,u.speed=0,u.angularSpeed=0,u.motion=0,f||a.trigger(u,"sleepStart")):(u.isSleeping=!1,u.sleepCounter=0,f&&a.trigger(u,"sleepEnd"))}})()}),(function(T,A,h){var e={};T.exports=e;var l=h(3),a=h(9);(function(){var r=[],u={overlap:0,axis:null},i={overlap:0,axis:null};e.create=function(f,o){return{pair:null,collided:!1,bodyA:f,bodyB:o,parentA:f.parent,parentB:o.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},e.collides=function(f,o,t){if(e._overlapAxes(u,f.vertices,o.vertices,f.axes),u.overlap<=0||(e._overlapAxes(i,o.vertices,f.vertices,o.axes),i.overlap<=0))return null;var n=t&&t.table[a.id(f,o)],s;n?s=n.collision:(s=e.create(f,o),s.collided=!0,s.bodyA=f.id<o.id?f:o,s.bodyB=f.id<o.id?o:f,s.parentA=s.bodyA.parent,s.parentB=s.bodyB.parent),f=s.bodyA,o=s.bodyB;var c;u.overlap<i.overlap?c=u:c=i;var m=s.normal,y=s.tangent,S=s.penetration,E=s.supports,d=c.overlap,p=c.axis,g=p.x,v=p.y,w=o.position.x-f.position.x,x=o.position.y-f.position.y;g*w+v*x>=0&&(g=-g,v=-v),m.x=g,m.y=v,y.x=-v,y.y=g,S.x=g*d,S.y=v*d,s.depth=d;var P=e._findSupports(f,o,m,1),M=0;if(l.contains(f.vertices,P[0])&&(E[M++]=P[0]),l.contains(f.vertices,P[1])&&(E[M++]=P[1]),M<2){var R=e._findSupports(o,f,m,-1);l.contains(o.vertices,R[0])&&(E[M++]=R[0]),M<2&&l.contains(o.vertices,R[1])&&(E[M++]=R[1])}return M===0&&(E[M++]=P[0]),s.supportCount=M,s},e._overlapAxes=function(f,o,t,n){var s=o.length,c=t.length,m=o[0].x,y=o[0].y,S=t[0].x,E=t[0].y,d=n.length,p=Number.MAX_VALUE,g=0,v,w,x,P,M,R;for(M=0;M<d;M++){var k=n[M],B=k.x,b=k.y,D=m*B+y*b,H=S*B+E*b,F=D,W=H;for(R=1;R<s;R+=1)P=o[R].x*B+o[R].y*b,P>F?F=P:P<D&&(D=P);for(R=1;R<c;R+=1)P=t[R].x*B+t[R].y*b,P>W?W=P:P<H&&(H=P);if(w=F-H,x=W-D,v=w<x?w:x,v<p&&(p=v,g=M,v<=0))break}f.axis=n[g],f.overlap=p},e._findSupports=function(f,o,t,n){var s=o.vertices,c=s.length,m=f.position.x,y=f.position.y,S=t.x*n,E=t.y*n,d=s[0],p=d,g=S*(m-p.x)+E*(y-p.y),v,w,x;for(x=1;x<c;x+=1)p=s[x],w=S*(m-p.x)+E*(y-p.y),w<g&&(g=w,d=p);return v=s[(c+d.index-1)%c],g=S*(m-v.x)+E*(y-v.y),p=s[(d.index+1)%c],S*(m-p.x)+E*(y-p.y)<g?(r[0]=d,r[1]=p,r):(r[0]=d,r[1]=v,r)}})()}),(function(T,A,h){var e={};T.exports=e;var l=h(16);(function(){e.create=function(a,r){var u=a.bodyA,i=a.bodyB,f={id:e.id(u,i),bodyA:u,bodyB:i,collision:a,contacts:[l.create(),l.create()],contactCount:0,separation:0,isActive:!0,isSensor:u.isSensor||i.isSensor,timeCreated:r,timeUpdated:r,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(f,a,r),f},e.update=function(a,r,u){var i=r.supports,f=r.supportCount,o=a.contacts,t=r.parentA,n=r.parentB;a.isActive=!0,a.timeUpdated=u,a.collision=r,a.separation=r.depth,a.inverseMass=t.inverseMass+n.inverseMass,a.friction=t.friction<n.friction?t.friction:n.friction,a.frictionStatic=t.frictionStatic>n.frictionStatic?t.frictionStatic:n.frictionStatic,a.restitution=t.restitution>n.restitution?t.restitution:n.restitution,a.slop=t.slop>n.slop?t.slop:n.slop,a.contactCount=f,r.pair=a;var s=i[0],c=o[0],m=i[1],y=o[1];(y.vertex===s||c.vertex===m)&&(o[1]=c,o[0]=c=y,y=o[1]),c.vertex=s,y.vertex=m},e.setActive=function(a,r,u){r?(a.isActive=!0,a.timeUpdated=u):(a.isActive=!1,a.contactCount=0)},e.id=function(a,r){return a.id<r.id?a.id.toString(36)+":"+r.id.toString(36):r.id.toString(36)+":"+a.id.toString(36)}})()}),(function(T,A,h){var e={};T.exports=e;var l=h(3),a=h(2),r=h(7),u=h(1),i=h(11),f=h(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(o){var t=o;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var n=t.bodyA?a.add(t.bodyA.position,t.pointA):t.pointA,s=t.bodyB?a.add(t.bodyB.position,t.pointB):t.pointB,c=a.magnitude(a.sub(n,s));t.length=typeof t.length<"u"?t.length:c,t.id=t.id||f.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var m={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(m.type="pin",m.anchors=!1):t.stiffness<.9&&(m.type="spring"),t.render=f.extend(m,t.render),t},e.preSolveAll=function(o){for(var t=0;t<o.length;t+=1){var n=o[t],s=n.constraintImpulse;n.isStatic||s.x===0&&s.y===0&&s.angle===0||(n.position.x+=s.x,n.position.y+=s.y,n.angle+=s.angle)}},e.solveAll=function(o,t){for(var n=f.clamp(t/f._baseDelta,0,1),s=0;s<o.length;s+=1){var c=o[s],m=!c.bodyA||c.bodyA&&c.bodyA.isStatic,y=!c.bodyB||c.bodyB&&c.bodyB.isStatic;(m||y)&&e.solve(o[s],n)}for(s=0;s<o.length;s+=1)c=o[s],m=!c.bodyA||c.bodyA&&c.bodyA.isStatic,y=!c.bodyB||c.bodyB&&c.bodyB.isStatic,!m&&!y&&e.solve(o[s],n)},e.solve=function(o,t){var n=o.bodyA,s=o.bodyB,c=o.pointA,m=o.pointB;if(!(!n&&!s)){n&&!n.isStatic&&(a.rotate(c,n.angle-o.angleA,c),o.angleA=n.angle),s&&!s.isStatic&&(a.rotate(m,s.angle-o.angleB,m),o.angleB=s.angle);var y=c,S=m;if(n&&(y=a.add(n.position,c)),s&&(S=a.add(s.position,m)),!(!y||!S)){var E=a.sub(y,S),d=a.magnitude(E);d<e._minLength&&(d=e._minLength);var p=(d-o.length)/d,g=o.stiffness>=1||o.length===0,v=g?o.stiffness*t:o.stiffness*t*t,w=o.damping*t,x=a.mult(E,p*v),P=(n?n.inverseMass:0)+(s?s.inverseMass:0),M=(n?n.inverseInertia:0)+(s?s.inverseInertia:0),R=P+M,k,B,b,D,H;if(w>0){var F=a.create();b=a.div(E,d),H=a.sub(s&&a.sub(s.position,s.positionPrev)||F,n&&a.sub(n.position,n.positionPrev)||F),D=a.dot(b,H)}n&&!n.isStatic&&(B=n.inverseMass/P,n.constraintImpulse.x-=x.x*B,n.constraintImpulse.y-=x.y*B,n.position.x-=x.x*B,n.position.y-=x.y*B,w>0&&(n.positionPrev.x-=w*b.x*D*B,n.positionPrev.y-=w*b.y*D*B),k=a.cross(c,x)/R*e._torqueDampen*n.inverseInertia*(1-o.angularStiffness),n.constraintImpulse.angle-=k,n.angle-=k),s&&!s.isStatic&&(B=s.inverseMass/P,s.constraintImpulse.x+=x.x*B,s.constraintImpulse.y+=x.y*B,s.position.x+=x.x*B,s.position.y+=x.y*B,w>0&&(s.positionPrev.x+=w*b.x*D*B,s.positionPrev.y+=w*b.y*D*B),k=a.cross(m,x)/R*e._torqueDampen*s.inverseInertia*(1-o.angularStiffness),s.constraintImpulse.angle+=k,s.angle+=k)}}},e.postSolveAll=function(o){for(var t=0;t<o.length;t++){var n=o[t],s=n.constraintImpulse;if(!(n.isStatic||s.x===0&&s.y===0&&s.angle===0)){r.set(n,!1);for(var c=0;c<n.parts.length;c++){var m=n.parts[c];l.translate(m.vertices,s),c>0&&(m.position.x+=s.x,m.position.y+=s.y),s.angle!==0&&(l.rotate(m.vertices,s.angle,n.position),i.rotate(m.axes,s.angle),c>0&&a.rotateAbout(m.position,s.angle,n.position,m.position)),u.update(m.bounds,m.vertices,n.velocity)}s.angle*=e._warming,s.x*=e._warming,s.y*=e._warming}}},e.pointAWorld=function(o){return{x:(o.bodyA?o.bodyA.position.x:0)+(o.pointA?o.pointA.x:0),y:(o.bodyA?o.bodyA.position.y:0)+(o.pointA?o.pointA.y:0)}},e.pointBWorld=function(o){return{x:(o.bodyB?o.bodyB.position.x:0)+(o.pointB?o.pointB.x:0),y:(o.bodyB?o.bodyB.position.y:0)+(o.pointB?o.pointB.y:0)}},e.currentLength=function(o){var t=(o.bodyA?o.bodyA.position.x:0)+(o.pointA?o.pointA.x:0),n=(o.bodyA?o.bodyA.position.y:0)+(o.pointA?o.pointA.y:0),s=(o.bodyB?o.bodyB.position.x:0)+(o.pointB?o.pointB.x:0),c=(o.bodyB?o.bodyB.position.y:0)+(o.pointB?o.pointB.y:0),m=t-s,y=n-c;return Math.sqrt(m*m+y*y)}})()}),(function(T,A,h){var e={};T.exports=e;var l=h(2),a=h(0);(function(){e.fromVertices=function(r){for(var u={},i=0;i<r.length;i++){var f=(i+1)%r.length,o=l.normalise({x:r[f].y-r[i].y,y:r[i].x-r[f].x}),t=o.y===0?1/0:o.x/o.y;t=t.toFixed(3).toString(),u[t]=o}return a.values(u)},e.rotate=function(r,u){if(u!==0)for(var i=Math.cos(u),f=Math.sin(u),o=0;o<r.length;o++){var t=r[o],n;n=t.x*i-t.y*f,t.y=t.x*f+t.y*i,t.x=n}}})()}),(function(T,A,h){var e={};T.exports=e;var l=h(3),a=h(0),r=h(4),u=h(1),i=h(2);(function(){e.rectangle=function(f,o,t,n,s){s=s||{};var c={label:"Rectangle Body",position:{x:f,y:o},vertices:l.fromPath("L 0 0 L "+t+" 0 L "+t+" "+n+" L 0 "+n)};if(s.chamfer){var m=s.chamfer;c.vertices=l.chamfer(c.vertices,m.radius,m.quality,m.qualityMin,m.qualityMax),delete s.chamfer}return r.create(a.extend({},c,s))},e.trapezoid=function(f,o,t,n,s,c){c=c||{},s>=1&&a.warn("Bodies.trapezoid: slope parameter must be < 1."),s*=.5;var m=(1-s*2)*t,y=t*s,S=y+m,E=S+y,d;s<.5?d="L 0 0 L "+y+" "+-n+" L "+S+" "+-n+" L "+E+" 0":d="L 0 0 L "+S+" "+-n+" L "+E+" 0";var p={label:"Trapezoid Body",position:{x:f,y:o},vertices:l.fromPath(d)};if(c.chamfer){var g=c.chamfer;p.vertices=l.chamfer(p.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete c.chamfer}return r.create(a.extend({},p,c))},e.circle=function(f,o,t,n,s){n=n||{};var c={label:"Circle Body",circleRadius:t};s=s||25;var m=Math.ceil(Math.max(10,Math.min(s,t)));return m%2===1&&(m+=1),e.polygon(f,o,m,t,a.extend({},c,n))},e.polygon=function(f,o,t,n,s){if(s=s||{},t<3)return e.circle(f,o,n,s);for(var c=2*Math.PI/t,m="",y=c*.5,S=0;S<t;S+=1){var E=y+S*c,d=Math.cos(E)*n,p=Math.sin(E)*n;m+="L "+d.toFixed(3)+" "+p.toFixed(3)+" "}var g={label:"Polygon Body",position:{x:f,y:o},vertices:l.fromPath(m)};if(s.chamfer){var v=s.chamfer;g.vertices=l.chamfer(g.vertices,v.radius,v.quality,v.qualityMin,v.qualityMax),delete s.chamfer}return r.create(a.extend({},g,s))},e.fromVertices=function(f,o,t,n,s,c,m,y){var S=a.getDecomp(),E,d,p,g,v,w,x,P,M,R,k;for(E=!!(S&&S.quickDecomp),n=n||{},p=[],s=typeof s<"u"?s:!1,c=typeof c<"u"?c:.01,m=typeof m<"u"?m:10,y=typeof y<"u"?y:.01,a.isArray(t[0])||(t=[t]),R=0;R<t.length;R+=1)if(w=t[R],g=l.isConvex(w),v=!g,v&&!E&&a.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),g||!E)g?w=l.clockwiseSort(w):w=l.hull(w),p.push({position:{x:f,y:o},vertices:w});else{var B=w.map(function(O){return[O.x,O.y]});S.makeCCW(B),c!==!1&&S.removeCollinearPoints(B,c),y!==!1&&S.removeDuplicatePoints&&S.removeDuplicatePoints(B,y);var b=S.quickDecomp(B);for(x=0;x<b.length;x++){var D=b[x],H=D.map(function(O){return{x:O[0],y:O[1]}});m>0&&l.area(H)<m||p.push({position:l.centre(H),vertices:H})}}for(x=0;x<p.length;x++)p[x]=r.create(a.extend(p[x],n));if(s){var F=5;for(x=0;x<p.length;x++){var W=p[x];for(P=x+1;P<p.length;P++){var z=p[P];if(u.overlaps(W.bounds,z.bounds)){var j=W.vertices,$=z.vertices;for(M=0;M<W.vertices.length;M++)for(k=0;k<z.vertices.length;k++){var J=i.magnitudeSquared(i.sub(j[(M+1)%j.length],$[k])),X=i.magnitudeSquared(i.sub(j[M],$[(k+1)%$.length]));J<F&&X<F&&(j[M].isInternal=!0,$[k].isInternal=!0)}}}}}return p.length>1?(d=r.create(a.extend({parts:p.slice(0)},n)),r.setPosition(d,{x:f,y:o}),d):p[0]}})()}),(function(T,A,h){var e={};T.exports=e;var l=h(0),a=h(8);(function(){e.create=function(r){var u={bodies:[],collisions:[],pairs:null};return l.extend(u,r)},e.setBodies=function(r,u){r.bodies=u.slice(0)},e.clear=function(r){r.bodies=[],r.collisions=[]},e.collisions=function(r){var u=r.pairs,i=r.bodies,f=i.length,o=e.canCollide,t=a.collides,n=r.collisions,s=0,c,m;for(i.sort(e._compareBoundsX),c=0;c<f;c++){var y=i[c],S=y.bounds,E=y.bounds.max.x,d=y.bounds.max.y,p=y.bounds.min.y,g=y.isStatic||y.isSleeping,v=y.parts.length,w=v===1;for(m=c+1;m<f;m++){var x=i[m],P=x.bounds;if(P.min.x>E)break;if(!(d<P.min.y||p>P.max.y)&&!(g&&(x.isStatic||x.isSleeping))&&o(y.collisionFilter,x.collisionFilter)){var M=x.parts.length;if(w&&M===1){var R=t(y,x,u);R&&(n[s++]=R)}else for(var k=v>1?1:0,B=M>1?1:0,b=k;b<v;b++)for(var D=y.parts[b],S=D.bounds,H=B;H<M;H++){var F=x.parts[H],P=F.bounds;if(!(S.min.x>P.max.x||S.max.x<P.min.x||S.max.y<P.min.y||S.min.y>P.max.y)){var R=t(D,F,u);R&&(n[s++]=R)}}}}}return n.length!==s&&(n.length=s),n},e.canCollide=function(r,u){return r.group===u.group&&r.group!==0?r.group>0:(r.mask&u.category)!==0&&(u.mask&r.category)!==0},e._compareBoundsX=function(r,u){return r.bounds.min.x-u.bounds.min.x}})()}),(function(T,A,h){var e={};T.exports=e;var l=h(0);(function(){e.create=function(a){var r={};return a||l.log("Mouse.create: element was undefined, defaulting to document.body","warn"),r.element=a||document.body,r.absolute={x:0,y:0},r.position={x:0,y:0},r.mousedownPosition={x:0,y:0},r.mouseupPosition={x:0,y:0},r.offset={x:0,y:0},r.scale={x:1,y:1},r.wheelDelta=0,r.button=-1,r.pixelRatio=parseInt(r.element.getAttribute("data-pixel-ratio"),10)||1,r.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},r.mousemove=function(u){var i=e._getRelativeMousePosition(u,r.element,r.pixelRatio),f=u.changedTouches;f&&(r.button=0,u.preventDefault()),r.absolute.x=i.x,r.absolute.y=i.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y,r.sourceEvents.mousemove=u},r.mousedown=function(u){var i=e._getRelativeMousePosition(u,r.element,r.pixelRatio),f=u.changedTouches;f?(r.button=0,u.preventDefault()):r.button=u.button,r.absolute.x=i.x,r.absolute.y=i.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y,r.mousedownPosition.x=r.position.x,r.mousedownPosition.y=r.position.y,r.sourceEvents.mousedown=u},r.mouseup=function(u){var i=e._getRelativeMousePosition(u,r.element,r.pixelRatio),f=u.changedTouches;f&&u.preventDefault(),r.button=-1,r.absolute.x=i.x,r.absolute.y=i.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y,r.mouseupPosition.x=r.position.x,r.mouseupPosition.y=r.position.y,r.sourceEvents.mouseup=u},r.mousewheel=function(u){r.wheelDelta=Math.max(-1,Math.min(1,u.wheelDelta||-u.detail)),u.preventDefault(),r.sourceEvents.mousewheel=u},e.setElement(r,r.element),r},e.setElement=function(a,r){a.element=r,r.addEventListener("mousemove",a.mousemove,{passive:!0}),r.addEventListener("mousedown",a.mousedown,{passive:!0}),r.addEventListener("mouseup",a.mouseup,{passive:!0}),r.addEventListener("wheel",a.mousewheel,{passive:!1}),r.addEventListener("touchmove",a.mousemove,{passive:!1}),r.addEventListener("touchstart",a.mousedown,{passive:!1}),r.addEventListener("touchend",a.mouseup,{passive:!1})},e.clearSourceEvents=function(a){a.sourceEvents.mousemove=null,a.sourceEvents.mousedown=null,a.sourceEvents.mouseup=null,a.sourceEvents.mousewheel=null,a.wheelDelta=0},e.setOffset=function(a,r){a.offset.x=r.x,a.offset.y=r.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},e.setScale=function(a,r){a.scale.x=r.x,a.scale.y=r.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},e._getRelativeMousePosition=function(a,r,u){var i=r.getBoundingClientRect(),f=document.documentElement||document.body.parentNode||document.body,o=window.pageXOffset!==void 0?window.pageXOffset:f.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:f.scrollTop,n=a.changedTouches,s,c;return n?(s=n[0].pageX-i.left-o,c=n[0].pageY-i.top-t):(s=a.pageX-i.left-o,c=a.pageY-i.top-t),{x:s/(r.clientWidth/(r.width||r.clientWidth)*u),y:c/(r.clientHeight/(r.height||r.clientHeight)*u)}}})()}),(function(T,A,h){var e={};T.exports=e;var l=h(0);(function(){e._registry={},e.register=function(a){if(e.isPlugin(a)||l.warn("Plugin.register:",e.toString(a),"does not implement all required fields."),a.name in e._registry){var r=e._registry[a.name],u=e.versionParse(a.version).number,i=e.versionParse(r.version).number;u>i?(l.warn("Plugin.register:",e.toString(r),"was upgraded to",e.toString(a)),e._registry[a.name]=a):u<i?l.warn("Plugin.register:",e.toString(r),"can not be downgraded to",e.toString(a)):a!==r&&l.warn("Plugin.register:",e.toString(a),"is already registered to different plugin object")}else e._registry[a.name]=a;return a},e.resolve=function(a){return e._registry[e.dependencyParse(a).name]},e.toString=function(a){return typeof a=="string"?a:(a.name||"anonymous")+"@"+(a.version||a.range||"0.0.0")},e.isPlugin=function(a){return a&&a.name&&a.version&&a.install},e.isUsed=function(a,r){return a.used.indexOf(r)>-1},e.isFor=function(a,r){var u=a.for&&e.dependencyParse(a.for);return!a.for||r.name===u.name&&e.versionSatisfies(r.version,u.range)},e.use=function(a,r){if(a.uses=(a.uses||[]).concat(r||[]),a.uses.length===0){l.warn("Plugin.use:",e.toString(a),"does not specify any dependencies to install.");return}for(var u=e.dependencies(a),i=l.topologicalSort(u),f=[],o=0;o<i.length;o+=1)if(i[o]!==a.name){var t=e.resolve(i[o]);if(!t){f.push("âŒ "+i[o]);continue}e.isUsed(a,t.name)||(e.isFor(t,a)||(l.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(a)+"."),t._warned=!0),t.install?t.install(a):(l.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(f.push("ðŸ”¶ "+e.toString(t)),delete t._warned):f.push("âœ… "+e.toString(t)),a.used.push(t.name))}f.length>0&&l.info(f.join("  "))},e.dependencies=function(a,r){var u=e.dependencyParse(a),i=u.name;if(r=r||{},!(i in r)){a=e.resolve(a)||a,r[i]=l.map(a.uses||[],function(o){e.isPlugin(o)&&e.register(o);var t=e.dependencyParse(o),n=e.resolve(o);return n&&!e.versionSatisfies(n.version,t.range)?(l.warn("Plugin.dependencies:",e.toString(n),"does not satisfy",e.toString(t),"used by",e.toString(u)+"."),n._warned=!0,a._warned=!0):n||(l.warn("Plugin.dependencies:",e.toString(o),"used by",e.toString(u),"could not be resolved."),a._warned=!0),t.name});for(var f=0;f<r[i].length;f+=1)e.dependencies(r[i][f],r);return r}},e.dependencyParse=function(a){if(l.isString(a)){var r=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return r.test(a)||l.warn("Plugin.dependencyParse:",a,"is not a valid dependency string."),{name:a.split("@")[0],range:a.split("@")[1]||"*"}}return{name:a.name,range:a.range||a.version}},e.versionParse=function(a){var r=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;r.test(a)||l.warn("Plugin.versionParse:",a,"is not a valid version or range.");var u=r.exec(a),i=Number(u[4]),f=Number(u[5]),o=Number(u[6]);return{isRange:!!(u[1]||u[2]),version:u[3],range:a,operator:u[1]||u[2]||"",major:i,minor:f,patch:o,parts:[i,f,o],prerelease:u[7],number:i*1e8+f*1e4+o}},e.versionSatisfies=function(a,r){r=r||"*";var u=e.versionParse(r),i=e.versionParse(a);if(u.isRange){if(u.operator==="*"||a==="*")return!0;if(u.operator===">")return i.number>u.number;if(u.operator===">=")return i.number>=u.number;if(u.operator==="~")return i.major===u.major&&i.minor===u.minor&&i.patch>=u.patch;if(u.operator==="^")return u.major>0?i.major===u.major&&i.number>=u.number:u.minor>0?i.minor===u.minor&&i.patch>=u.patch:i.patch===u.patch}return a===r||a==="*"}})()}),(function(T,A){var h={};T.exports=h,(function(){h.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}})()}),(function(T,A,h){var e={};T.exports=e;var l=h(7),a=h(18),r=h(13),u=h(19),i=h(5),f=h(6),o=h(10),t=h(0),n=h(4);(function(){e._deltaMax=1e3/60,e.create=function(s){s=s||{};var c={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},m=t.extend(c,s);return m.world=s.world||f.create({label:"World"}),m.pairs=s.pairs||u.create(),m.detector=s.detector||r.create(),m.detector.pairs=m.pairs,m.grid={buckets:[]},m.world.gravity=m.gravity,m.broadphase=m.grid,m.metrics={},m},e.update=function(s,c){var m=t.now(),y=s.world,S=s.detector,E=s.pairs,d=s.timing,p=d.timestamp,g;c>e._deltaMax&&t.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",e._deltaMax.toFixed(3),"ms."),c=typeof c<"u"?c:t._baseDelta,c*=d.timeScale,d.timestamp+=c,d.lastDelta=c;var v={timestamp:d.timestamp,delta:c};i.trigger(s,"beforeUpdate",v);var w=f.allBodies(y),x=f.allConstraints(y);for(y.isModified&&(r.setBodies(S,w),f.setModified(y,!1,!1,!0)),s.enableSleeping&&l.update(w,c),e._bodiesApplyGravity(w,s.gravity),c>0&&e._bodiesUpdate(w,c),i.trigger(s,"beforeSolve",v),o.preSolveAll(w),g=0;g<s.constraintIterations;g++)o.solveAll(x,c);o.postSolveAll(w);var P=r.collisions(S);u.update(E,P,p),s.enableSleeping&&l.afterCollisions(E.list),E.collisionStart.length>0&&i.trigger(s,"collisionStart",{pairs:E.collisionStart,timestamp:d.timestamp,delta:c});var M=t.clamp(20/s.positionIterations,0,1);for(a.preSolvePosition(E.list),g=0;g<s.positionIterations;g++)a.solvePosition(E.list,c,M);for(a.postSolvePosition(w),o.preSolveAll(w),g=0;g<s.constraintIterations;g++)o.solveAll(x,c);for(o.postSolveAll(w),a.preSolveVelocity(E.list),g=0;g<s.velocityIterations;g++)a.solveVelocity(E.list,c);return e._bodiesUpdateVelocities(w),E.collisionActive.length>0&&i.trigger(s,"collisionActive",{pairs:E.collisionActive,timestamp:d.timestamp,delta:c}),E.collisionEnd.length>0&&i.trigger(s,"collisionEnd",{pairs:E.collisionEnd,timestamp:d.timestamp,delta:c}),e._bodiesClearForces(w),i.trigger(s,"afterUpdate",v),s.timing.lastElapsed=t.now()-m,s},e.merge=function(s,c){if(t.extend(s,c),c.world){s.world=c.world,e.clear(s);for(var m=f.allBodies(s.world),y=0;y<m.length;y++){var S=m[y];l.set(S,!1),S.id=t.nextId()}}},e.clear=function(s){u.clear(s.pairs),r.clear(s.detector)},e._bodiesClearForces=function(s){for(var c=s.length,m=0;m<c;m++){var y=s[m];y.force.x=0,y.force.y=0,y.torque=0}},e._bodiesApplyGravity=function(s,c){var m=typeof c.scale<"u"?c.scale:.001,y=s.length;if(!(c.x===0&&c.y===0||m===0))for(var S=0;S<y;S++){var E=s[S];E.isStatic||E.isSleeping||(E.force.y+=E.mass*c.y*m,E.force.x+=E.mass*c.x*m)}},e._bodiesUpdate=function(s,c){for(var m=s.length,y=0;y<m;y++){var S=s[y];S.isStatic||S.isSleeping||n.update(S,c)}},e._bodiesUpdateVelocities=function(s){for(var c=s.length,m=0;m<c;m++)n.updateVelocities(s[m])}})()}),(function(T,A,h){var e={};T.exports=e;var l=h(3),a=h(0),r=h(1);(function(){e._restingThresh=2,e._restingThreshTangent=Math.sqrt(6),e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e._frictionMaxStatic=Number.MAX_VALUE,e.preSolvePosition=function(u){var i,f,o,t=u.length;for(i=0;i<t;i++)f=u[i],f.isActive&&(o=f.contactCount,f.collision.parentA.totalContacts+=o,f.collision.parentB.totalContacts+=o)},e.solvePosition=function(u,i,f){var o,t,n,s,c,m,y,S,E=e._positionDampen*(f||1),d=a.clamp(i/a._baseDelta,0,1),p=u.length;for(o=0;o<p;o++)t=u[o],!(!t.isActive||t.isSensor)&&(n=t.collision,s=n.parentA,c=n.parentB,m=n.normal,t.separation=n.depth+m.x*(c.positionImpulse.x-s.positionImpulse.x)+m.y*(c.positionImpulse.y-s.positionImpulse.y));for(o=0;o<p;o++)t=u[o],!(!t.isActive||t.isSensor)&&(n=t.collision,s=n.parentA,c=n.parentB,m=n.normal,S=t.separation-t.slop*d,(s.isStatic||c.isStatic)&&(S*=2),s.isStatic||s.isSleeping||(y=E/s.totalContacts,s.positionImpulse.x+=m.x*S*y,s.positionImpulse.y+=m.y*S*y),c.isStatic||c.isSleeping||(y=E/c.totalContacts,c.positionImpulse.x-=m.x*S*y,c.positionImpulse.y-=m.y*S*y))},e.postSolvePosition=function(u){for(var i=e._positionWarming,f=u.length,o=l.translate,t=r.update,n=0;n<f;n++){var s=u[n],c=s.positionImpulse,m=c.x,y=c.y,S=s.velocity;if(s.totalContacts=0,m!==0||y!==0){for(var E=0;E<s.parts.length;E++){var d=s.parts[E];o(d.vertices,c),t(d.bounds,d.vertices,S),d.position.x+=m,d.position.y+=y}s.positionPrev.x+=m,s.positionPrev.y+=y,m*S.x+y*S.y<0?(c.x=0,c.y=0):(c.x*=i,c.y*=i)}}},e.preSolveVelocity=function(u){var i=u.length,f,o;for(f=0;f<i;f++){var t=u[f];if(!(!t.isActive||t.isSensor)){var n=t.contacts,s=t.contactCount,c=t.collision,m=c.parentA,y=c.parentB,S=c.normal,E=c.tangent;for(o=0;o<s;o++){var d=n[o],p=d.vertex,g=d.normalImpulse,v=d.tangentImpulse;if(g!==0||v!==0){var w=S.x*g+E.x*v,x=S.y*g+E.y*v;m.isStatic||m.isSleeping||(m.positionPrev.x+=w*m.inverseMass,m.positionPrev.y+=x*m.inverseMass,m.anglePrev+=m.inverseInertia*((p.x-m.position.x)*x-(p.y-m.position.y)*w)),y.isStatic||y.isSleeping||(y.positionPrev.x-=w*y.inverseMass,y.positionPrev.y-=x*y.inverseMass,y.anglePrev-=y.inverseInertia*((p.x-y.position.x)*x-(p.y-y.position.y)*w))}}}}},e.solveVelocity=function(u,i){var f=i/a._baseDelta,o=f*f,t=o*f,n=-e._restingThresh*f,s=e._restingThreshTangent,c=e._frictionNormalMultiplier*f,m=e._frictionMaxStatic,y=u.length,S,E,d,p;for(d=0;d<y;d++){var g=u[d];if(!(!g.isActive||g.isSensor)){var v=g.collision,w=v.parentA,x=v.parentB,P=v.normal.x,M=v.normal.y,R=v.tangent.x,k=v.tangent.y,B=g.inverseMass,b=g.friction*g.frictionStatic*c,D=g.contacts,H=g.contactCount,F=1/H,W=w.position.x-w.positionPrev.x,z=w.position.y-w.positionPrev.y,j=w.angle-w.anglePrev,$=x.position.x-x.positionPrev.x,J=x.position.y-x.positionPrev.y,X=x.angle-x.anglePrev;for(p=0;p<H;p++){var O=D[p],Y=O.vertex,U=Y.x-w.position.x,_=Y.y-w.position.y,Q=Y.x-x.position.x,K=Y.y-x.position.y,G=W-_*j,Ae=z+U*j,Le=$-K*X,ke=J+Q*X,ue=G-Le,he=Ae-ke,ae=P*ue+M*he,Z=R*ue+k*he,de=g.separation+ae,le=Math.min(de,1);le=de<0?0:le;var ve=le*b;Z<-ve||Z>ve?(E=Z>0?Z:-Z,S=g.friction*(Z>0?1:-1)*t,S<-E?S=-E:S>E&&(S=E)):(S=Z,E=m);var pe=U*M-_*P,me=Q*M-K*P,ge=F/(B+w.inverseInertia*pe*pe+x.inverseInertia*me*me),ie=(1+g.restitution)*ae*ge;if(S*=ge,ae<n)O.normalImpulse=0;else{var Be=O.normalImpulse;O.normalImpulse+=ie,O.normalImpulse>0&&(O.normalImpulse=0),ie=O.normalImpulse-Be}if(Z<-s||Z>s)O.tangentImpulse=0;else{var De=O.tangentImpulse;O.tangentImpulse+=S,O.tangentImpulse<-E&&(O.tangentImpulse=-E),O.tangentImpulse>E&&(O.tangentImpulse=E),S=O.tangentImpulse-De}var ne=P*ie+R*S,se=M*ie+k*S;w.isStatic||w.isSleeping||(w.positionPrev.x+=ne*w.inverseMass,w.positionPrev.y+=se*w.inverseMass,w.anglePrev+=(U*se-_*ne)*w.inverseInertia),x.isStatic||x.isSleeping||(x.positionPrev.x-=ne*x.inverseMass,x.positionPrev.y-=se*x.inverseMass,x.anglePrev-=(Q*se-K*ne)*x.inverseInertia)}}}}})()}),(function(T,A,h){var e={};T.exports=e;var l=h(9),a=h(0);(function(){e.create=function(r){return a.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},r)},e.update=function(r,u,i){var f=l.update,o=l.create,t=l.setActive,n=r.table,s=r.list,c=s.length,m=c,y=r.collisionStart,S=r.collisionEnd,E=r.collisionActive,d=u.length,p=0,g=0,v=0,w,x,P;for(P=0;P<d;P++)w=u[P],x=w.pair,x?(x.isActive&&(E[v++]=x),f(x,w,i)):(x=o(w,i),n[x.id]=x,y[p++]=x,s[m++]=x);for(m=0,c=s.length,P=0;P<c;P++)x=s[P],x.timeUpdated>=i?s[m++]=x:(t(x,!1,i),x.collision.bodyA.sleepCounter>0&&x.collision.bodyB.sleepCounter>0?s[m++]=x:(S[g++]=x,delete n[x.id]));s.length!==m&&(s.length=m),y.length!==p&&(y.length=p),S.length!==g&&(S.length=g),E.length!==v&&(E.length=v)},e.clear=function(r){return r.table={},r.list.length=0,r.collisionStart.length=0,r.collisionActive.length=0,r.collisionEnd.length=0,r}})()}),(function(T,A,h){var e=T.exports=h(21);e.Axes=h(11),e.Bodies=h(12),e.Body=h(4),e.Bounds=h(1),e.Collision=h(8),e.Common=h(0),e.Composite=h(6),e.Composites=h(22),e.Constraint=h(10),e.Contact=h(16),e.Detector=h(13),e.Engine=h(17),e.Events=h(5),e.Grid=h(23),e.Mouse=h(14),e.MouseConstraint=h(24),e.Pair=h(9),e.Pairs=h(19),e.Plugin=h(15),e.Query=h(25),e.Render=h(26),e.Resolver=h(18),e.Runner=h(27),e.SAT=h(28),e.Sleeping=h(7),e.Svg=h(29),e.Vector=h(2),e.Vertices=h(3),e.World=h(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run âž¤ use Matter.Runner.run(engine) instead")}),(function(T,A,h){var e={};T.exports=e;var l=h(15),a=h(0);(function(){e.name="matter-js",e.version="0.20.0",e.uses=[],e.used=[],e.use=function(){l.use(e,Array.prototype.slice.call(arguments))},e.before=function(r,u){return r=r.replace(/^Matter./,""),a.chainPathBefore(e,r,u)},e.after=function(r,u){return r=r.replace(/^Matter./,""),a.chainPathAfter(e,r,u)}})()}),(function(T,A,h){var e={};T.exports=e;var l=h(6),a=h(10),r=h(0),u=h(4),i=h(12),f=r.deprecated;(function(){e.stack=function(o,t,n,s,c,m,y){for(var S=l.create({label:"Stack"}),E=o,d=t,p,g=0,v=0;v<s;v++){for(var w=0,x=0;x<n;x++){var P=y(E,d,x,v,p,g);if(P){var M=P.bounds.max.y-P.bounds.min.y,R=P.bounds.max.x-P.bounds.min.x;M>w&&(w=M),u.translate(P,{x:R*.5,y:M*.5}),E=P.bounds.max.x+c,l.addBody(S,P),p=P,g+=1}else E+=c}d+=w+m,E=o}return S},e.chain=function(o,t,n,s,c,m){for(var y=o.bodies,S=1;S<y.length;S++){var E=y[S-1],d=y[S],p=E.bounds.max.y-E.bounds.min.y,g=E.bounds.max.x-E.bounds.min.x,v=d.bounds.max.y-d.bounds.min.y,w=d.bounds.max.x-d.bounds.min.x,x={bodyA:E,pointA:{x:g*t,y:p*n},bodyB:d,pointB:{x:w*s,y:v*c}},P=r.extend(x,m);l.addConstraint(o,a.create(P))}return o.label+=" Chain",o},e.mesh=function(o,t,n,s,c){var m=o.bodies,y,S,E,d,p;for(y=0;y<n;y++){for(S=1;S<t;S++)E=m[S-1+y*t],d=m[S+y*t],l.addConstraint(o,a.create(r.extend({bodyA:E,bodyB:d},c)));if(y>0)for(S=0;S<t;S++)E=m[S+(y-1)*t],d=m[S+y*t],l.addConstraint(o,a.create(r.extend({bodyA:E,bodyB:d},c))),s&&S>0&&(p=m[S-1+(y-1)*t],l.addConstraint(o,a.create(r.extend({bodyA:p,bodyB:d},c)))),s&&S<t-1&&(p=m[S+1+(y-1)*t],l.addConstraint(o,a.create(r.extend({bodyA:p,bodyB:d},c))))}return o.label+=" Mesh",o},e.pyramid=function(o,t,n,s,c,m,y){return e.stack(o,t,n,s,c,m,function(S,E,d,p,g,v){var w=Math.min(s,Math.ceil(n/2)),x=g?g.bounds.max.x-g.bounds.min.x:0;if(!(p>w)){p=w-p;var P=p,M=n-1-p;if(!(d<P||d>M)){v===1&&u.translate(g,{x:(d+(n%2===1?1:-1))*x,y:0});var R=g?d*x:0;return y(o+R+d*c,E,d,p,g,v)}}})},e.newtonsCradle=function(o,t,n,s,c){for(var m=l.create({label:"Newtons Cradle"}),y=0;y<n;y++){var S=1.9,E=i.circle(o+y*(s*S),t+c,s,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),d=a.create({pointA:{x:o+y*(s*S),y:t},bodyB:E});l.addBody(m,E),l.addConstraint(m,d)}return m},f(e,"newtonsCradle","Composites.newtonsCradle âž¤ moved to newtonsCradle example"),e.car=function(o,t,n,s,c){var m=u.nextGroup(!0),y=20,S=-n*.5+y,E=n*.5-y,d=0,p=l.create({label:"Car"}),g=i.rectangle(o,t,n,s,{collisionFilter:{group:m},chamfer:{radius:s*.5},density:2e-4}),v=i.circle(o+S,t+d,c,{collisionFilter:{group:m},friction:.8}),w=i.circle(o+E,t+d,c,{collisionFilter:{group:m},friction:.8}),x=a.create({bodyB:g,pointB:{x:S,y:d},bodyA:v,stiffness:1,length:0}),P=a.create({bodyB:g,pointB:{x:E,y:d},bodyA:w,stiffness:1,length:0});return l.addBody(p,g),l.addBody(p,v),l.addBody(p,w),l.addConstraint(p,x),l.addConstraint(p,P),p},f(e,"car","Composites.car âž¤ moved to car example"),e.softBody=function(o,t,n,s,c,m,y,S,E,d){E=r.extend({inertia:1/0},E),d=r.extend({stiffness:.2,render:{type:"line",anchors:!1}},d);var p=e.stack(o,t,n,s,c,m,function(g,v){return i.circle(g,v,S,E)});return e.mesh(p,n,s,y,d),p.label="Soft Body",p},f(e,"softBody","Composites.softBody âž¤ moved to softBody and cloth examples")})()}),(function(T,A,h){var e={};T.exports=e;var l=h(9),a=h(0),r=a.deprecated;(function(){e.create=function(u){var i={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return a.extend(i,u)},e.update=function(u,i,f,o){var t,n,s,c=f.world,m=u.buckets,y,S,E=!1;for(t=0;t<i.length;t++){var d=i[t];if(!(d.isSleeping&&!o)&&!(c.bounds&&(d.bounds.max.x<c.bounds.min.x||d.bounds.min.x>c.bounds.max.x||d.bounds.max.y<c.bounds.min.y||d.bounds.min.y>c.bounds.max.y))){var p=e._getRegion(u,d);if(!d.region||p.id!==d.region.id||o){(!d.region||o)&&(d.region=p);var g=e._regionUnion(p,d.region);for(n=g.startCol;n<=g.endCol;n++)for(s=g.startRow;s<=g.endRow;s++){S=e._getBucketId(n,s),y=m[S];var v=n>=p.startCol&&n<=p.endCol&&s>=p.startRow&&s<=p.endRow,w=n>=d.region.startCol&&n<=d.region.endCol&&s>=d.region.startRow&&s<=d.region.endRow;!v&&w&&w&&y&&e._bucketRemoveBody(u,y,d),(d.region===p||v&&!w||o)&&(y||(y=e._createBucket(m,S)),e._bucketAddBody(u,y,d))}d.region=p,E=!0}}}E&&(u.pairsList=e._createActivePairsList(u))},r(e,"update","Grid.update âž¤ replaced by Matter.Detector"),e.clear=function(u){u.buckets={},u.pairs={},u.pairsList=[]},r(e,"clear","Grid.clear âž¤ replaced by Matter.Detector"),e._regionUnion=function(u,i){var f=Math.min(u.startCol,i.startCol),o=Math.max(u.endCol,i.endCol),t=Math.min(u.startRow,i.startRow),n=Math.max(u.endRow,i.endRow);return e._createRegion(f,o,t,n)},e._getRegion=function(u,i){var f=i.bounds,o=Math.floor(f.min.x/u.bucketWidth),t=Math.floor(f.max.x/u.bucketWidth),n=Math.floor(f.min.y/u.bucketHeight),s=Math.floor(f.max.y/u.bucketHeight);return e._createRegion(o,t,n,s)},e._createRegion=function(u,i,f,o){return{id:u+","+i+","+f+","+o,startCol:u,endCol:i,startRow:f,endRow:o}},e._getBucketId=function(u,i){return"C"+u+"R"+i},e._createBucket=function(u,i){var f=u[i]=[];return f},e._bucketAddBody=function(u,i,f){var o=u.pairs,t=l.id,n=i.length,s;for(s=0;s<n;s++){var c=i[s];if(!(f.id===c.id||f.isStatic&&c.isStatic)){var m=t(f,c),y=o[m];y?y[2]+=1:o[m]=[f,c,1]}}i.push(f)},e._bucketRemoveBody=function(u,i,f){var o=u.pairs,t=l.id,n;i.splice(a.indexOf(i,f),1);var s=i.length;for(n=0;n<s;n++){var c=o[t(f,i[n])];c&&(c[2]-=1)}},e._createActivePairsList=function(u){var i,f=u.pairs,o=a.keys(f),t=o.length,n=[],s;for(s=0;s<t;s++)i=f[o[s]],i[2]>0?n.push(i):delete f[o[s]];return n}})()}),(function(T,A,h){var e={};T.exports=e;var l=h(3),a=h(7),r=h(14),u=h(5),i=h(13),f=h(10),o=h(6),t=h(0),n=h(1);(function(){e.create=function(s,c){var m=(s?s.mouse:null)||(c?c.mouse:null);m||(s&&s.render&&s.render.canvas?m=r.create(s.render.canvas):c&&c.element?m=r.create(c.element):(m=r.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var y=f.create({label:"Mouse Constraint",pointA:m.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),S={type:"mouseConstraint",mouse:m,element:null,body:null,constraint:y,collisionFilter:{category:1,mask:4294967295,group:0}},E=t.extend(S,c);return u.on(s,"beforeUpdate",function(){var d=o.allBodies(s.world);e.update(E,d),e._triggerEvents(E)}),E},e.update=function(s,c){var m=s.mouse,y=s.constraint,S=s.body;if(m.button===0){if(y.bodyB)a.set(y.bodyB,!1),y.pointA=m.position;else for(var E=0;E<c.length;E++)if(S=c[E],n.contains(S.bounds,m.position)&&i.canCollide(S.collisionFilter,s.collisionFilter))for(var d=S.parts.length>1?1:0;d<S.parts.length;d++){var p=S.parts[d];if(l.contains(p.vertices,m.position)){y.pointA=m.position,y.bodyB=s.body=S,y.pointB={x:m.position.x-S.position.x,y:m.position.y-S.position.y},y.angleB=S.angle,a.set(S,!1),u.trigger(s,"startdrag",{mouse:m,body:S});break}}}else y.bodyB=s.body=null,y.pointB=null,S&&u.trigger(s,"enddrag",{mouse:m,body:S})},e._triggerEvents=function(s){var c=s.mouse,m=c.sourceEvents;m.mousemove&&u.trigger(s,"mousemove",{mouse:c}),m.mousedown&&u.trigger(s,"mousedown",{mouse:c}),m.mouseup&&u.trigger(s,"mouseup",{mouse:c}),r.clearSourceEvents(c)}})()}),(function(T,A,h){var e={};T.exports=e;var l=h(2),a=h(8),r=h(1),u=h(12),i=h(3);(function(){e.collides=function(f,o){for(var t=[],n=o.length,s=f.bounds,c=a.collides,m=r.overlaps,y=0;y<n;y++){var S=o[y],E=S.parts.length,d=E===1?0:1;if(m(S.bounds,s))for(var p=d;p<E;p++){var g=S.parts[p];if(m(g.bounds,s)){var v=c(g,f);if(v){t.push(v);break}}}}return t},e.ray=function(f,o,t,n){n=n||1e-100;for(var s=l.angle(o,t),c=l.magnitude(l.sub(o,t)),m=(t.x+o.x)*.5,y=(t.y+o.y)*.5,S=u.rectangle(m,y,c,n,{angle:s}),E=e.collides(S,f),d=0;d<E.length;d+=1){var p=E[d];p.body=p.bodyB=p.bodyA}return E},e.region=function(f,o,t){for(var n=[],s=0;s<f.length;s++){var c=f[s],m=r.overlaps(c.bounds,o);(m&&!t||!m&&t)&&n.push(c)}return n},e.point=function(f,o){for(var t=[],n=0;n<f.length;n++){var s=f[n];if(r.contains(s.bounds,o))for(var c=s.parts.length===1?0:1;c<s.parts.length;c++){var m=s.parts[c];if(r.contains(m.bounds,o)&&i.contains(m.vertices,o)){t.push(s);break}}}return t}})()}),(function(T,A,h){var e={};T.exports=e;var l=h(4),a=h(0),r=h(6),u=h(1),i=h(5),f=h(2),o=h(14);(function(){var t,n;typeof window<"u"&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(d){window.setTimeout(function(){d(a.now())},1e3/60)},n=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(d){var p={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!d.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},g=a.extend(p,d);return g.canvas&&(g.canvas.width=g.options.width||g.canvas.width,g.canvas.height=g.options.height||g.canvas.height),g.mouse=d.mouse,g.engine=d.engine,g.canvas=g.canvas||m(g.options.width,g.options.height),g.context=g.canvas.getContext("2d"),g.textures={},g.bounds=g.bounds||{min:{x:0,y:0},max:{x:g.canvas.width,y:g.canvas.height}},g.controller=e,g.options.showBroadphase=!1,g.options.pixelRatio!==1&&e.setPixelRatio(g,g.options.pixelRatio),a.isElement(g.element)&&g.element.appendChild(g.canvas),g},e.run=function(d){(function p(g){d.frameRequestId=t(p),s(d,g),e.world(d,g),d.context.setTransform(d.options.pixelRatio,0,0,d.options.pixelRatio,0,0),(d.options.showStats||d.options.showDebug)&&e.stats(d,d.context,g),(d.options.showPerformance||d.options.showDebug)&&e.performance(d,d.context,g),d.context.setTransform(1,0,0,1,0,0)})()},e.stop=function(d){n(d.frameRequestId)},e.setPixelRatio=function(d,p){var g=d.options,v=d.canvas;p==="auto"&&(p=y(v)),g.pixelRatio=p,v.setAttribute("data-pixel-ratio",p),v.width=g.width*p,v.height=g.height*p,v.style.width=g.width+"px",v.style.height=g.height+"px"},e.setSize=function(d,p,g){d.options.width=p,d.options.height=g,d.bounds.max.x=d.bounds.min.x+p,d.bounds.max.y=d.bounds.min.y+g,d.options.pixelRatio!==1?e.setPixelRatio(d,d.options.pixelRatio):(d.canvas.width=p,d.canvas.height=g)},e.lookAt=function(d,p,g,v){v=typeof v<"u"?v:!0,p=a.isArray(p)?p:[p],g=g||{x:0,y:0};for(var w={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},x=0;x<p.length;x+=1){var P=p[x],M=P.bounds?P.bounds.min:P.min||P.position||P,R=P.bounds?P.bounds.max:P.max||P.position||P;M&&R&&(M.x<w.min.x&&(w.min.x=M.x),R.x>w.max.x&&(w.max.x=R.x),M.y<w.min.y&&(w.min.y=M.y),R.y>w.max.y&&(w.max.y=R.y))}var k=w.max.x-w.min.x+2*g.x,B=w.max.y-w.min.y+2*g.y,b=d.canvas.height,D=d.canvas.width,H=D/b,F=k/B,W=1,z=1;F>H?z=F/H:W=H/F,d.options.hasBounds=!0,d.bounds.min.x=w.min.x,d.bounds.max.x=w.min.x+k*W,d.bounds.min.y=w.min.y,d.bounds.max.y=w.min.y+B*z,v&&(d.bounds.min.x+=k*.5-k*W*.5,d.bounds.max.x+=k*.5-k*W*.5,d.bounds.min.y+=B*.5-B*z*.5,d.bounds.max.y+=B*.5-B*z*.5),d.bounds.min.x-=g.x,d.bounds.max.x-=g.x,d.bounds.min.y-=g.y,d.bounds.max.y-=g.y,d.mouse&&(o.setScale(d.mouse,{x:(d.bounds.max.x-d.bounds.min.x)/d.canvas.width,y:(d.bounds.max.y-d.bounds.min.y)/d.canvas.height}),o.setOffset(d.mouse,d.bounds.min))},e.startViewTransform=function(d){var p=d.bounds.max.x-d.bounds.min.x,g=d.bounds.max.y-d.bounds.min.y,v=p/d.options.width,w=g/d.options.height;d.context.setTransform(d.options.pixelRatio/v,0,0,d.options.pixelRatio/w,0,0),d.context.translate(-d.bounds.min.x,-d.bounds.min.y)},e.endViewTransform=function(d){d.context.setTransform(d.options.pixelRatio,0,0,d.options.pixelRatio,0,0)},e.world=function(d,p){var g=a.now(),v=d.engine,w=v.world,x=d.canvas,P=d.context,M=d.options,R=d.timing,k=r.allBodies(w),B=r.allConstraints(w),b=M.wireframes?M.wireframeBackground:M.background,D=[],H=[],F,W={timestamp:v.timing.timestamp};if(i.trigger(d,"beforeRender",W),d.currentBackground!==b&&E(d,b),P.globalCompositeOperation="source-in",P.fillStyle="transparent",P.fillRect(0,0,x.width,x.height),P.globalCompositeOperation="source-over",M.hasBounds){for(F=0;F<k.length;F++){var z=k[F];u.overlaps(z.bounds,d.bounds)&&D.push(z)}for(F=0;F<B.length;F++){var j=B[F],$=j.bodyA,J=j.bodyB,X=j.pointA,O=j.pointB;$&&(X=f.add($.position,j.pointA)),J&&(O=f.add(J.position,j.pointB)),!(!X||!O)&&(u.contains(d.bounds,X)||u.contains(d.bounds,O))&&H.push(j)}e.startViewTransform(d),d.mouse&&(o.setScale(d.mouse,{x:(d.bounds.max.x-d.bounds.min.x)/d.options.width,y:(d.bounds.max.y-d.bounds.min.y)/d.options.height}),o.setOffset(d.mouse,d.bounds.min))}else H=B,D=k,d.options.pixelRatio!==1&&d.context.setTransform(d.options.pixelRatio,0,0,d.options.pixelRatio,0,0);!M.wireframes||v.enableSleeping&&M.showSleeping?e.bodies(d,D,P):(M.showConvexHulls&&e.bodyConvexHulls(d,D,P),e.bodyWireframes(d,D,P)),M.showBounds&&e.bodyBounds(d,D,P),(M.showAxes||M.showAngleIndicator)&&e.bodyAxes(d,D,P),M.showPositions&&e.bodyPositions(d,D,P),M.showVelocity&&e.bodyVelocity(d,D,P),M.showIds&&e.bodyIds(d,D,P),M.showSeparations&&e.separations(d,v.pairs.list,P),M.showCollisions&&e.collisions(d,v.pairs.list,P),M.showVertexNumbers&&e.vertexNumbers(d,D,P),M.showMousePosition&&e.mousePosition(d,d.mouse,P),e.constraints(H,P),M.hasBounds&&e.endViewTransform(d),i.trigger(d,"afterRender",W),R.lastElapsed=a.now()-g},e.stats=function(d,p,g){for(var v=d.engine,w=v.world,x=r.allBodies(w),P=0,M=55,R=44,k=0,B=0,b=0;b<x.length;b+=1)P+=x[b].parts.length;var D={Part:P,Body:x.length,Cons:r.allConstraints(w).length,Comp:r.allComposites(w).length,Pair:v.pairs.list.length};p.fillStyle="#0e0f19",p.fillRect(k,B,M*5.5,R),p.font="12px Arial",p.textBaseline="top",p.textAlign="right";for(var H in D){var F=D[H];p.fillStyle="#aaa",p.fillText(H,k+M,B+8),p.fillStyle="#eee",p.fillText(F,k+M,B+26),k+=M}},e.performance=function(d,p){var g=d.engine,v=d.timing,w=v.deltaHistory,x=v.elapsedHistory,P=v.timestampElapsedHistory,M=v.engineDeltaHistory,R=v.engineUpdatesHistory,k=v.engineElapsedHistory,B=g.timing.lastUpdatesPerFrame,b=g.timing.lastDelta,D=c(w),H=c(x),F=c(M),W=c(R),z=c(k),j=c(P),$=j/D||0,J=Math.round(D/b),X=1e3/D||0,O=4,Y=12,U=60,_=34,Q=10,K=69;p.fillStyle="#0e0f19",p.fillRect(0,50,Y*5+U*6+22,_),e.status(p,Q,K,U,O,w.length,Math.round(X)+" fps",X/e._goodFps,function(G){return w[G]/D-1}),e.status(p,Q+Y+U,K,U,O,M.length,b.toFixed(2)+" dt",e._goodDelta/b,function(G){return M[G]/F-1}),e.status(p,Q+(Y+U)*2,K,U,O,R.length,B+" upf",Math.pow(a.clamp(W/J||1,0,1),4),function(G){return R[G]/W-1}),e.status(p,Q+(Y+U)*3,K,U,O,k.length,z.toFixed(2)+" ut",1-B*z/e._goodFps,function(G){return k[G]/z-1}),e.status(p,Q+(Y+U)*4,K,U,O,x.length,H.toFixed(2)+" rt",1-H/e._goodFps,function(G){return x[G]/H-1}),e.status(p,Q+(Y+U)*5,K,U,O,P.length,$.toFixed(2)+" x",$*$*$,function(G){return(P[G]/w[G]/$||0)-1})},e.status=function(d,p,g,v,w,x,P,M,R){d.strokeStyle="#888",d.fillStyle="#444",d.lineWidth=1,d.fillRect(p,g+7,v,1),d.beginPath(),d.moveTo(p,g+7-w*a.clamp(.4*R(0),-2,2));for(var k=0;k<v;k+=1)d.lineTo(p+k,g+7-(k<x?w*a.clamp(.4*R(k),-2,2):0));d.stroke(),d.fillStyle="hsl("+a.clamp(25+95*M,0,120)+",100%,60%)",d.fillRect(p,g-7,4,4),d.font="12px Arial",d.textBaseline="middle",d.textAlign="right",d.fillStyle="#eee",d.fillText(P,p+v,g-5)},e.constraints=function(d,p){for(var g=p,v=0;v<d.length;v++){var w=d[v];if(!(!w.render.visible||!w.pointA||!w.pointB)){var x=w.bodyA,P=w.bodyB,M,R;if(x?M=f.add(x.position,w.pointA):M=w.pointA,w.render.type==="pin")g.beginPath(),g.arc(M.x,M.y,3,0,2*Math.PI),g.closePath();else{if(P?R=f.add(P.position,w.pointB):R=w.pointB,g.beginPath(),g.moveTo(M.x,M.y),w.render.type==="spring")for(var k=f.sub(R,M),B=f.perp(f.normalise(k)),b=Math.ceil(a.clamp(w.length/5,12,20)),D,H=1;H<b;H+=1)D=H%2===0?1:-1,g.lineTo(M.x+k.x*(H/b)+B.x*D*4,M.y+k.y*(H/b)+B.y*D*4);g.lineTo(R.x,R.y)}w.render.lineWidth&&(g.lineWidth=w.render.lineWidth,g.strokeStyle=w.render.strokeStyle,g.stroke()),w.render.anchors&&(g.fillStyle=w.render.strokeStyle,g.beginPath(),g.arc(M.x,M.y,3,0,2*Math.PI),g.arc(R.x,R.y,3,0,2*Math.PI),g.closePath(),g.fill())}}},e.bodies=function(d,p,g){var v=g;d.engine;var w=d.options,x=w.showInternalEdges||!w.wireframes,P,M,R,k;for(R=0;R<p.length;R++)if(P=p[R],!!P.render.visible){for(k=P.parts.length>1?1:0;k<P.parts.length;k++)if(M=P.parts[k],!!M.render.visible){if(w.showSleeping&&P.isSleeping?v.globalAlpha=.5*M.render.opacity:M.render.opacity!==1&&(v.globalAlpha=M.render.opacity),M.render.sprite&&M.render.sprite.texture&&!w.wireframes){var B=M.render.sprite,b=S(d,B.texture);v.translate(M.position.x,M.position.y),v.rotate(M.angle),v.drawImage(b,b.width*-B.xOffset*B.xScale,b.height*-B.yOffset*B.yScale,b.width*B.xScale,b.height*B.yScale),v.rotate(-M.angle),v.translate(-M.position.x,-M.position.y)}else{if(M.circleRadius)v.beginPath(),v.arc(M.position.x,M.position.y,M.circleRadius,0,2*Math.PI);else{v.beginPath(),v.moveTo(M.vertices[0].x,M.vertices[0].y);for(var D=1;D<M.vertices.length;D++)!M.vertices[D-1].isInternal||x?v.lineTo(M.vertices[D].x,M.vertices[D].y):v.moveTo(M.vertices[D].x,M.vertices[D].y),M.vertices[D].isInternal&&!x&&v.moveTo(M.vertices[(D+1)%M.vertices.length].x,M.vertices[(D+1)%M.vertices.length].y);v.lineTo(M.vertices[0].x,M.vertices[0].y),v.closePath()}w.wireframes?(v.lineWidth=1,v.strokeStyle=d.options.wireframeStrokeStyle,v.stroke()):(v.fillStyle=M.render.fillStyle,M.render.lineWidth&&(v.lineWidth=M.render.lineWidth,v.strokeStyle=M.render.strokeStyle,v.stroke()),v.fill())}v.globalAlpha=1}}},e.bodyWireframes=function(d,p,g){var v=g,w=d.options.showInternalEdges,x,P,M,R,k;for(v.beginPath(),M=0;M<p.length;M++)if(x=p[M],!!x.render.visible)for(k=x.parts.length>1?1:0;k<x.parts.length;k++){for(P=x.parts[k],v.moveTo(P.vertices[0].x,P.vertices[0].y),R=1;R<P.vertices.length;R++)!P.vertices[R-1].isInternal||w?v.lineTo(P.vertices[R].x,P.vertices[R].y):v.moveTo(P.vertices[R].x,P.vertices[R].y),P.vertices[R].isInternal&&!w&&v.moveTo(P.vertices[(R+1)%P.vertices.length].x,P.vertices[(R+1)%P.vertices.length].y);v.lineTo(P.vertices[0].x,P.vertices[0].y)}v.lineWidth=1,v.strokeStyle=d.options.wireframeStrokeStyle,v.stroke()},e.bodyConvexHulls=function(d,p,g){var v=g,w,x,P;for(v.beginPath(),x=0;x<p.length;x++)if(w=p[x],!(!w.render.visible||w.parts.length===1)){for(v.moveTo(w.vertices[0].x,w.vertices[0].y),P=1;P<w.vertices.length;P++)v.lineTo(w.vertices[P].x,w.vertices[P].y);v.lineTo(w.vertices[0].x,w.vertices[0].y)}v.lineWidth=1,v.strokeStyle="rgba(255,255,255,0.2)",v.stroke()},e.vertexNumbers=function(d,p,g){var v=g,w,x,P;for(w=0;w<p.length;w++){var M=p[w].parts;for(P=M.length>1?1:0;P<M.length;P++){var R=M[P];for(x=0;x<R.vertices.length;x++)v.fillStyle="rgba(255,255,255,0.2)",v.fillText(w+"_"+x,R.position.x+(R.vertices[x].x-R.position.x)*.8,R.position.y+(R.vertices[x].y-R.position.y)*.8)}}},e.mousePosition=function(d,p,g){var v=g;v.fillStyle="rgba(255,255,255,0.8)",v.fillText(p.position.x+"  "+p.position.y,p.position.x+5,p.position.y-5)},e.bodyBounds=function(d,p,g){var v=g;d.engine;var w=d.options;v.beginPath();for(var x=0;x<p.length;x++){var P=p[x];if(P.render.visible)for(var M=p[x].parts,R=M.length>1?1:0;R<M.length;R++){var k=M[R];v.rect(k.bounds.min.x,k.bounds.min.y,k.bounds.max.x-k.bounds.min.x,k.bounds.max.y-k.bounds.min.y)}}w.wireframes?v.strokeStyle="rgba(255,255,255,0.08)":v.strokeStyle="rgba(0,0,0,0.1)",v.lineWidth=1,v.stroke()},e.bodyAxes=function(d,p,g){var v=g;d.engine;var w=d.options,x,P,M,R;for(v.beginPath(),P=0;P<p.length;P++){var k=p[P],B=k.parts;if(k.render.visible)if(w.showAxes)for(M=B.length>1?1:0;M<B.length;M++)for(x=B[M],R=0;R<x.axes.length;R++){var b=x.axes[R];v.moveTo(x.position.x,x.position.y),v.lineTo(x.position.x+b.x*20,x.position.y+b.y*20)}else for(M=B.length>1?1:0;M<B.length;M++)for(x=B[M],R=0;R<x.axes.length;R++)v.moveTo(x.position.x,x.position.y),v.lineTo((x.vertices[0].x+x.vertices[x.vertices.length-1].x)/2,(x.vertices[0].y+x.vertices[x.vertices.length-1].y)/2)}w.wireframes?(v.strokeStyle="indianred",v.lineWidth=1):(v.strokeStyle="rgba(255, 255, 255, 0.4)",v.globalCompositeOperation="overlay",v.lineWidth=2),v.stroke(),v.globalCompositeOperation="source-over"},e.bodyPositions=function(d,p,g){var v=g;d.engine;var w=d.options,x,P,M,R;for(v.beginPath(),M=0;M<p.length;M++)if(x=p[M],!!x.render.visible)for(R=0;R<x.parts.length;R++)P=x.parts[R],v.arc(P.position.x,P.position.y,3,0,2*Math.PI,!1),v.closePath();for(w.wireframes?v.fillStyle="indianred":v.fillStyle="rgba(0,0,0,0.5)",v.fill(),v.beginPath(),M=0;M<p.length;M++)x=p[M],x.render.visible&&(v.arc(x.positionPrev.x,x.positionPrev.y,2,0,2*Math.PI,!1),v.closePath());v.fillStyle="rgba(255,165,0,0.8)",v.fill()},e.bodyVelocity=function(d,p,g){var v=g;v.beginPath();for(var w=0;w<p.length;w++){var x=p[w];if(x.render.visible){var P=l.getVelocity(x);v.moveTo(x.position.x,x.position.y),v.lineTo(x.position.x+P.x,x.position.y+P.y)}}v.lineWidth=3,v.strokeStyle="cornflowerblue",v.stroke()},e.bodyIds=function(d,p,g){var v=g,w,x;for(w=0;w<p.length;w++)if(p[w].render.visible){var P=p[w].parts;for(x=P.length>1?1:0;x<P.length;x++){var M=P[x];v.font="12px Arial",v.fillStyle="rgba(255,255,255,0.5)",v.fillText(M.id,M.position.x+10,M.position.y-10)}}},e.collisions=function(d,p,g){var v=g,w=d.options,x,P,M,R;for(v.beginPath(),M=0;M<p.length;M++)if(x=p[M],!!x.isActive)for(P=x.collision,R=0;R<x.contactCount;R++){var k=x.contacts[R],B=k.vertex;v.rect(B.x-1.5,B.y-1.5,3.5,3.5)}for(w.wireframes?v.fillStyle="rgba(255,255,255,0.7)":v.fillStyle="orange",v.fill(),v.beginPath(),M=0;M<p.length;M++)if(x=p[M],!!x.isActive&&(P=x.collision,x.contactCount>0)){var b=x.contacts[0].vertex.x,D=x.contacts[0].vertex.y;x.contactCount===2&&(b=(x.contacts[0].vertex.x+x.contacts[1].vertex.x)/2,D=(x.contacts[0].vertex.y+x.contacts[1].vertex.y)/2),P.bodyB===P.supports[0].body||P.bodyA.isStatic===!0?v.moveTo(b-P.normal.x*8,D-P.normal.y*8):v.moveTo(b+P.normal.x*8,D+P.normal.y*8),v.lineTo(b,D)}w.wireframes?v.strokeStyle="rgba(255,165,0,0.7)":v.strokeStyle="orange",v.lineWidth=1,v.stroke()},e.separations=function(d,p,g){var v=g,w=d.options,x,P,M,R,k;for(v.beginPath(),k=0;k<p.length;k++)if(x=p[k],!!x.isActive){P=x.collision,M=P.bodyA,R=P.bodyB;var B=1;!R.isStatic&&!M.isStatic&&(B=.5),R.isStatic&&(B=0),v.moveTo(R.position.x,R.position.y),v.lineTo(R.position.x-P.penetration.x*B,R.position.y-P.penetration.y*B),B=1,!R.isStatic&&!M.isStatic&&(B=.5),M.isStatic&&(B=0),v.moveTo(M.position.x,M.position.y),v.lineTo(M.position.x+P.penetration.x*B,M.position.y+P.penetration.y*B)}w.wireframes?v.strokeStyle="rgba(255,165,0,0.5)":v.strokeStyle="orange",v.stroke()},e.inspector=function(d,p){d.engine;var g=d.selected,v=d.render,w=v.options,x;if(w.hasBounds){var P=v.bounds.max.x-v.bounds.min.x,M=v.bounds.max.y-v.bounds.min.y,R=P/v.options.width,k=M/v.options.height;p.scale(1/R,1/k),p.translate(-v.bounds.min.x,-v.bounds.min.y)}for(var B=0;B<g.length;B++){var b=g[B].data;switch(p.translate(.5,.5),p.lineWidth=1,p.strokeStyle="rgba(255,165,0,0.9)",p.setLineDash([1,2]),b.type){case"body":x=b.bounds,p.beginPath(),p.rect(Math.floor(x.min.x-3),Math.floor(x.min.y-3),Math.floor(x.max.x-x.min.x+6),Math.floor(x.max.y-x.min.y+6)),p.closePath(),p.stroke();break;case"constraint":var D=b.pointA;b.bodyA&&(D=b.pointB),p.beginPath(),p.arc(D.x,D.y,10,0,2*Math.PI),p.closePath(),p.stroke();break}p.setLineDash([]),p.translate(-.5,-.5)}d.selectStart!==null&&(p.translate(.5,.5),p.lineWidth=1,p.strokeStyle="rgba(255,165,0,0.6)",p.fillStyle="rgba(255,165,0,0.1)",x=d.selectBounds,p.beginPath(),p.rect(Math.floor(x.min.x),Math.floor(x.min.y),Math.floor(x.max.x-x.min.x),Math.floor(x.max.y-x.min.y)),p.closePath(),p.stroke(),p.fill(),p.translate(-.5,-.5)),w.hasBounds&&p.setTransform(1,0,0,1,0,0)};var s=function(d,p){var g=d.engine,v=d.timing,w=v.historySize,x=g.timing.timestamp;v.delta=p-v.lastTime||e._goodDelta,v.lastTime=p,v.timestampElapsed=x-v.lastTimestamp||0,v.lastTimestamp=x,v.deltaHistory.unshift(v.delta),v.deltaHistory.length=Math.min(v.deltaHistory.length,w),v.engineDeltaHistory.unshift(g.timing.lastDelta),v.engineDeltaHistory.length=Math.min(v.engineDeltaHistory.length,w),v.timestampElapsedHistory.unshift(v.timestampElapsed),v.timestampElapsedHistory.length=Math.min(v.timestampElapsedHistory.length,w),v.engineUpdatesHistory.unshift(g.timing.lastUpdatesPerFrame),v.engineUpdatesHistory.length=Math.min(v.engineUpdatesHistory.length,w),v.engineElapsedHistory.unshift(g.timing.lastElapsed),v.engineElapsedHistory.length=Math.min(v.engineElapsedHistory.length,w),v.elapsedHistory.unshift(v.lastElapsed),v.elapsedHistory.length=Math.min(v.elapsedHistory.length,w)},c=function(d){for(var p=0,g=0;g<d.length;g+=1)p+=d[g];return p/d.length||0},m=function(d,p){var g=document.createElement("canvas");return g.width=d,g.height=p,g.oncontextmenu=function(){return!1},g.onselectstart=function(){return!1},g},y=function(d){var p=d.getContext("2d"),g=window.devicePixelRatio||1,v=p.webkitBackingStorePixelRatio||p.mozBackingStorePixelRatio||p.msBackingStorePixelRatio||p.oBackingStorePixelRatio||p.backingStorePixelRatio||1;return g/v},S=function(d,p){var g=d.textures[p];return g||(g=d.textures[p]=new Image,g.src=p,g)},E=function(d,p){var g=p;/(jpg|gif|png)$/.test(p)&&(g="url("+p+")"),d.canvas.style.background=g,d.canvas.style.backgroundSize="contain",d.currentBackground=p}})()}),(function(T,A,h){var e={};T.exports=e;var l=h(5),a=h(17),r=h(0);(function(){e._maxFrameDelta=1e3/15,e._frameDeltaFallback=1e3/60,e._timeBufferMargin=1.5,e._elapsedNextEstimate=1,e._smoothingLowerBound=.1,e._smoothingUpperBound=.9,e.create=function(i){var f={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},o=r.extend(f,i);return o.fps=0,o},e.run=function(i,f){return i.timeBuffer=e._frameDeltaFallback,(function o(t){i.frameRequestId=e._onNextFrame(i,o),t&&i.enabled&&e.tick(i,f,t)})(),i},e.tick=function(i,f,o){var t=r.now(),n=i.delta,s=0,c=o-i.timeLastTick;if((!c||!i.timeLastTick||c>Math.max(e._maxFrameDelta,i.maxFrameTime))&&(c=i.frameDelta||e._frameDeltaFallback),i.frameDeltaSmoothing){i.frameDeltaHistory.push(c),i.frameDeltaHistory=i.frameDeltaHistory.slice(-i.frameDeltaHistorySize);var m=i.frameDeltaHistory.slice(0).sort(),y=i.frameDeltaHistory.slice(m.length*e._smoothingLowerBound,m.length*e._smoothingUpperBound),S=u(y);c=S||c}i.frameDeltaSnapping&&(c=1e3/Math.round(1e3/c)),i.frameDelta=c,i.timeLastTick=o,i.timeBuffer+=i.frameDelta,i.timeBuffer=r.clamp(i.timeBuffer,0,i.frameDelta+n*e._timeBufferMargin),i.lastUpdatesDeferred=0;var E=i.maxUpdates||Math.ceil(i.maxFrameTime/n),d={timestamp:f.timing.timestamp};l.trigger(i,"beforeTick",d),l.trigger(i,"tick",d);for(var p=r.now();n>0&&i.timeBuffer>=n*e._timeBufferMargin;){l.trigger(i,"beforeUpdate",d),a.update(f,n),l.trigger(i,"afterUpdate",d),i.timeBuffer-=n,s+=1;var g=r.now()-t,v=r.now()-p,w=g+e._elapsedNextEstimate*v/s;if(s>=E||w>i.maxFrameTime){i.lastUpdatesDeferred=Math.round(Math.max(0,i.timeBuffer/n-e._timeBufferMargin));break}}f.timing.lastUpdatesPerFrame=s,l.trigger(i,"afterTick",d),i.frameDeltaHistory.length>=100&&(i.lastUpdatesDeferred&&Math.round(i.frameDelta/n)>E?r.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):i.lastUpdatesDeferred&&r.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof i.isFixed<"u"&&r.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(i.deltaMin||i.deltaMax)&&r.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),i.fps!==0&&r.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},e.stop=function(i){e._cancelNextFrame(i)},e._onNextFrame=function(i,f){if(typeof window<"u"&&window.requestAnimationFrame)i.frameRequestId=window.requestAnimationFrame(f);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return i.frameRequestId},e._cancelNextFrame=function(i){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(i.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var u=function(i){for(var f=0,o=i.length,t=0;t<o;t+=1)f+=i[t];return f/o||0}})()}),(function(T,A,h){var e={};T.exports=e;var l=h(8),a=h(0),r=a.deprecated;(function(){e.collides=function(u,i){return l.collides(u,i)},r(e,"collides","SAT.collides âž¤ replaced by Collision.collides")})()}),(function(T,A,h){var e={};T.exports=e,h(1);var l=h(0);(function(){e.pathToVertices=function(a,r){typeof window<"u"&&!("SVGPathSeg"in window)&&l.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var u,i,f,o,t,n,s,c,m,y,S=[],E,d,p=0,g=0,v=0;r=r||15;var w=function(P,M,R){var k=R%2===1&&R>1;if(!m||P!=m.x||M!=m.y){m&&k?(E=m.x,d=m.y):(E=0,d=0);var B={x:E+P,y:d+M};(k||!m)&&(m=B),S.push(B),g=E+P,v=d+M}},x=function(P){var M=P.pathSegTypeAsLetter.toUpperCase();if(M!=="Z"){switch(M){case"M":case"L":case"T":case"C":case"S":case"Q":g=P.x,v=P.y;break;case"H":g=P.x;break;case"V":v=P.y;break}w(g,v,P.pathSegType)}};for(e._svgPathToAbsolute(a),f=a.getTotalLength(),n=[],u=0;u<a.pathSegList.numberOfItems;u+=1)n.push(a.pathSegList.getItem(u));for(s=n.concat();p<f;){if(y=a.getPathSegAtLength(p),t=n[y],t!=c){for(;s.length&&s[0]!=t;)x(s.shift());c=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":o=a.getPointAtLength(p),w(o.x,o.y,0);break}p+=r}for(u=0,i=s.length;u<i;++u)x(s[u]);return S},e._svgPathToAbsolute=function(a){for(var r,u,i,f,o,t,n=a.pathSegList,s=0,c=0,m=n.numberOfItems,y=0;y<m;++y){var S=n.getItem(y),E=S.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(E))"x"in S&&(s=S.x),"y"in S&&(c=S.y);else switch("x1"in S&&(i=s+S.x1),"x2"in S&&(o=s+S.x2),"y1"in S&&(f=c+S.y1),"y2"in S&&(t=c+S.y2),"x"in S&&(s+=S.x),"y"in S&&(c+=S.y),E){case"m":n.replaceItem(a.createSVGPathSegMovetoAbs(s,c),y);break;case"l":n.replaceItem(a.createSVGPathSegLinetoAbs(s,c),y);break;case"h":n.replaceItem(a.createSVGPathSegLinetoHorizontalAbs(s),y);break;case"v":n.replaceItem(a.createSVGPathSegLinetoVerticalAbs(c),y);break;case"c":n.replaceItem(a.createSVGPathSegCurvetoCubicAbs(s,c,i,f,o,t),y);break;case"s":n.replaceItem(a.createSVGPathSegCurvetoCubicSmoothAbs(s,c,o,t),y);break;case"q":n.replaceItem(a.createSVGPathSegCurvetoQuadraticAbs(s,c,i,f),y);break;case"t":n.replaceItem(a.createSVGPathSegCurvetoQuadraticSmoothAbs(s,c),y);break;case"a":n.replaceItem(a.createSVGPathSegArcAbs(s,c,S.r1,S.r2,S.angle,S.largeArcFlag,S.sweepFlag),y);break;case"z":case"Z":s=r,c=u;break}(E=="M"||E=="m")&&(r=s,u=c)}}})()}),(function(T,A,h){var e={};T.exports=e;var l=h(6);h(0),(function(){e.create=l.create,e.add=l.add,e.remove=l.remove,e.clear=l.clear,e.addComposite=l.addComposite,e.addBody=l.addBody,e.addConstraint=l.addConstraint})()})])})})(re)),re.exports}var mt=pt();const ce=Oe(mt),gt=()=>typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches,xt=()=>{const C=N.useRef(null),I=N.useRef(null),[T]=N.useState(gt);return N.useEffect(()=>{if(!C.current||T)return;const{Engine:A,Render:h,Runner:e,Bodies:l,Composite:a,Mouse:r,MouseConstraint:u,Events:i,Body:f}=ce,t=window.innerWidth<768?8:15,n=A.create({gravity:{y:0}});I.current=n;const s=h.create({element:C.current,engine:n,options:{width:window.innerWidth,height:window.innerHeight,wireframes:!1,background:"transparent",pixelRatio:Math.min(window.devicePixelRatio,2)}}),c=["#ffffff","#cccccc","#999999"],m=[];for(let M=0;M<t;M++){const R=Math.random()*window.innerWidth,k=Math.random()*window.innerHeight,B=Math.random()*25+10,b=c[Math.floor(Math.random()*c.length)];m.push(l.polygon(R,k,Math.floor(Math.random()*4)+3,B,{render:{fillStyle:"transparent",strokeStyle:b,lineWidth:1},restitution:.9,frictionAir:.02}))}const y={isStatic:!0,render:{visible:!1}},S=[l.rectangle(window.innerWidth/2,-50,window.innerWidth,100,y),l.rectangle(window.innerWidth/2,window.innerHeight+50,window.innerWidth,100,y),l.rectangle(window.innerWidth+50,window.innerHeight/2,100,window.innerHeight,y),l.rectangle(-50,window.innerHeight/2,100,window.innerHeight,y)];a.add(n.world,[...m,...S]);const E=r.create(s.canvas),d=u.create(n,{mouse:E,constraint:{stiffness:.2,render:{visible:!1}}});a.add(n.world,d),s.mouse=E,i.on(n,"beforeUpdate",()=>{const{x:M,y:R}=E.position;m.forEach(k=>{const B=k.position.x-M,b=k.position.y-R,D=Math.sqrt(B*B+b*b);if(D<150){const H=(150-D)*3e-5;f.applyForce(k,k.position,{x:B*H,y:b*H})}})});const p=e.create();let g=!1;const v=()=>{g||(e.run(p,n),h.run(s),g=!0)},w=()=>{g&&(e.stop(p),h.stop(s),g=!1)};v();const x=new IntersectionObserver(([M])=>M.isIntersecting?v():w(),{threshold:.1});x.observe(C.current);const P=()=>{s.canvas.width=window.innerWidth,s.canvas.height=window.innerHeight,f.setPosition(S[0],{x:window.innerWidth/2,y:-50}),f.setPosition(S[1],{x:window.innerWidth/2,y:window.innerHeight+50}),f.setPosition(S[2],{x:window.innerWidth+50,y:window.innerHeight/2}),f.setPosition(S[3],{x:-50,y:window.innerHeight/2})};return window.addEventListener("resize",P),()=>{x.disconnect(),w(),window.removeEventListener("resize",P),ce.World.clear(n.world),ce.Engine.clear(n),s.canvas?.remove()}},[T]),L.jsxs("section",{className:"relative w-full h-[100svh] min-h-[400px] overflow-hidden bg-[#050505]",children:[L.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10 px-4",children:L.jsx("h2",{className:"text-[clamp(1.5rem,5vw,4rem)] font-bold text-white mix-blend-difference text-center",children:"INTERACTIVE CHAOS"})}),!T&&L.jsx("div",{ref:C,className:"absolute inset-0"}),T&&L.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900/50 to-black"})]})},yt=({onComplete:C})=>{const[I,T]=N.useState(0),[A,h]=N.useState(""),e="CODE BY KARL",l="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",a=N.useCallback(()=>{let r=0;const u=setInterval(()=>{h(e.split("").map((i,f)=>f<r?e[f]:i===" "?" ":l[Math.floor(Math.random()*l.length)]).join("")),r>=e.length&&(clearInterval(u),setTimeout(C,400)),r+=.4},25);return()=>clearInterval(u)},[C]);return N.useEffect(()=>{let r=!0,u;return(async()=>{for(let f=0;f<=100;f++){if(!r)return;T(f),await new Promise(o=>setTimeout(o,18))}r&&(u=a())})(),()=>{r=!1,u?.()}},[a]),L.jsx(V.div,{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black text-white",initial:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:L.jsx("div",{className:"text-center px-4",children:L.jsx("div",{className:"text-[clamp(3rem,12vw,10rem)] font-bold tracking-tighter font-mono",children:I<100?I.toString().padStart(3,"0"):A})})})},wt=()=>L.jsx("section",{id:"about",className:"w-full py-16 md:py-24 px-4 md:px-8",children:L.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[L.jsx(V.h2,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"text-[clamp(2rem,5vw,4rem)] font-bold uppercase leading-tight tracking-tight mb-8",children:"THE HUMAN ELEMENT"}),L.jsx(V.p,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1},viewport:{once:!0},className:"text-base md:text-lg lg:text-xl font-light leading-relaxed text-gray-300",children:"In an era of generated content, we choose to craft. We believe that true digital experiences are born from human intuition, not just prediction. Every interaction, every motion, and every pixel is placed with intentâ€”creating work that resonates because it was made by a mind, not a model."})]})}),St=()=>L.jsx("section",{id:"contact",className:"w-full py-16 md:py-24 px-4 md:px-8 border-t border-white/10",children:L.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[L.jsx(V.h2,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"text-[clamp(2rem,6vw,5rem)] font-bold uppercase leading-tight tracking-tight mb-6",children:"HUMANS STILL ANSWER"}),L.jsx(V.p,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1},viewport:{once:!0},className:"text-sm md:text-base text-gray-400 tracking-wide uppercase mb-10",children:"Human coders. Real keyboards. Reach out and let's push back together."}),L.jsx(V.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!0},children:L.jsx(Re,{children:L.jsxs("a",{href:"https://instagram.com/karl__jung",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-3 px-6 py-3 md:px-8 md:py-4 border border-white/20 rounded-full bg-transparent hover:bg-white hover:text-black transition-all duration-300 text-sm md:text-base font-medium uppercase tracking-widest",children:["@KARL__JUNG",L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-transform group-hover:translate-x-1 group-hover:-translate-y-1",children:[L.jsx("path",{d:"M7 7h10v10"}),L.jsx("path",{d:"M7 17 17 7"})]})]})})}),L.jsx(V.footer,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6,delay:.3},viewport:{once:!0},className:"mt-16 md:mt-24 text-xs md:text-sm text-gray-500 uppercase tracking-widest",children:"Â© 2024 HUMAN CODE COLLECTIVE"})]})}),Ct=()=>{const[C,I]=N.useState(!1),T=oe(-100),A=oe(-100),h=N.useRef(null),e={damping:25,stiffness:700},l=te(T,e),a=te(A,e);N.useEffect(()=>{const u=()=>{const i=window.matchMedia("(pointer: fine)").matches,f=window.matchMedia("(prefers-reduced-motion: reduce)").matches,o="ontouchstart"in window||navigator.maxTouchPoints>0;I(i&&!f&&!o)};return u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]);const r=N.useCallback(u=>{h.current||(h.current=requestAnimationFrame(()=>{T.set(u.clientX-16),A.set(u.clientY-16),h.current=null}))},[T,A]);return N.useEffect(()=>{if(C)return window.addEventListener("mousemove",r,{passive:!0}),()=>{window.removeEventListener("mousemove",r),h.current&&cancelAnimationFrame(h.current)}},[C,r]),C?L.jsxs(L.Fragment,{children:[L.jsx("style",{children:`
        @media (pointer: fine) and (prefers-reduced-motion: no-preference) {
          body, a, button { cursor: none !important; }
        }
      `}),L.jsx(V.div,{className:"fixed top-0 left-0 w-8 h-8 border border-white rounded-full pointer-events-none z-[9999] mix-blend-difference",style:{x:l,y:a},"aria-hidden":"true"}),L.jsx(V.div,{className:"fixed top-0 left-0 w-2 h-2 bg-white rounded-full pointer-events-none z-[9999] mix-blend-difference",style:{x:T,y:A,translateX:12,translateY:12},"aria-hidden":"true"})]}):null};function Mt(){const[C,I]=N.useState(!0);return L.jsxs(Ue,{children:[L.jsx(Ct,{}),L.jsx(Me,{mode:"wait",children:C&&L.jsx(yt,{onComplete:()=>I(!1)},"preloader")}),!C&&L.jsx(lt,{children:L.jsxs("main",{className:"relative w-full min-h-screen bg-[#050505] text-white overflow-x-hidden",children:[L.jsx(dt,{}),L.jsx(Ye,{}),L.jsx(ut,{}),L.jsx(ct,{text:`WE WRITE THE CODE
NOT THE MACHINES`}),L.jsx(xt,{}),L.jsx(wt,{}),L.jsx(St,{})]})})]})}je.createRoot(document.getElementById("root")).render(L.jsx(N.StrictMode,{children:L.jsx(Mt,{})}));
